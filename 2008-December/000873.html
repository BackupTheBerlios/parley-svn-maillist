<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Parley-svn] r991 - / trunk/root trunk/root/skin2	trunk/root/skin2/about trunk/root/skin2/error	trunk/root/skin2/forum trunk/root/skin2/help	trunk/root/skin2/help/i_default trunk/root/skin2/menu	trunk/root/skin2/menu/left trunk/root/skin2/my	trunk/root/skin2/post trunk/root/skin2/search	trunk/root/skin2/shared trunk/root/skin2/site	trunk/root/skin2/terms trunk/root/skin2/thread	trunk/root/skin2/user trunk/root/skin2/user/lostpassword	trunk/root/skin2/user/signup trunk/root/skin3	trunk/root/skin3/thread trunk/root/static/css
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/parley-svn/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:parley-svn%40lists.berlios.de?Subject=Re%3A%20%5BParley-svn%5D%20r991%20-%20/%20trunk/root%20trunk/root/skin2%0A%09trunk/root/skin2/about%20trunk/root/skin2/error%0A%09trunk/root/skin2/forum%20trunk/root/skin2/help%0A%09trunk/root/skin2/help/i_default%20trunk/root/skin2/menu%0A%09trunk/root/skin2/menu/left%20trunk/root/skin2/my%0A%09trunk/root/skin2/post%20trunk/root/skin2/search%0A%09trunk/root/skin2/shared%20trunk/root/skin2/site%0A%09trunk/root/skin2/terms%20trunk/root/skin2/thread%0A%09trunk/root/skin2/user%20trunk/root/skin2/user/lostpassword%0A%09trunk/root/skin2/user/signup%20trunk/root/skin3%0A%09trunk/root/skin3/thread%20trunk/root/static/css&In-Reply-To=%3C200812222201.mBMM137L022717%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000872.html">
   <LINK REL="Next"  HREF="000874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Parley-svn] r991 - / trunk/root trunk/root/skin2	trunk/root/skin2/about trunk/root/skin2/error	trunk/root/skin2/forum trunk/root/skin2/help	trunk/root/skin2/help/i_default trunk/root/skin2/menu	trunk/root/skin2/menu/left trunk/root/skin2/my	trunk/root/skin2/post trunk/root/skin2/search	trunk/root/skin2/shared trunk/root/skin2/site	trunk/root/skin2/terms trunk/root/skin2/thread	trunk/root/skin2/user trunk/root/skin2/user/lostpassword	trunk/root/skin2/user/signup trunk/root/skin3	trunk/root/skin3/thread trunk/root/static/css</H1>
    <B>chiselwright at BerliOS</B> 
    <A HREF="mailto:parley-svn%40lists.berlios.de?Subject=Re%3A%20%5BParley-svn%5D%20r991%20-%20/%20trunk/root%20trunk/root/skin2%0A%09trunk/root/skin2/about%20trunk/root/skin2/error%0A%09trunk/root/skin2/forum%20trunk/root/skin2/help%0A%09trunk/root/skin2/help/i_default%20trunk/root/skin2/menu%0A%09trunk/root/skin2/menu/left%20trunk/root/skin2/my%0A%09trunk/root/skin2/post%20trunk/root/skin2/search%0A%09trunk/root/skin2/shared%20trunk/root/skin2/site%0A%09trunk/root/skin2/terms%20trunk/root/skin2/thread%0A%09trunk/root/skin2/user%20trunk/root/skin2/user/lostpassword%0A%09trunk/root/skin2/user/signup%20trunk/root/skin3%0A%09trunk/root/skin3/thread%20trunk/root/static/css&In-Reply-To=%3C200812222201.mBMM137L022717%40sheep.berlios.de%3E"
       TITLE="[Parley-svn] r991 - / trunk/root trunk/root/skin2	trunk/root/skin2/about trunk/root/skin2/error	trunk/root/skin2/forum trunk/root/skin2/help	trunk/root/skin2/help/i_default trunk/root/skin2/menu	trunk/root/skin2/menu/left trunk/root/skin2/my	trunk/root/skin2/post trunk/root/skin2/search	trunk/root/skin2/shared trunk/root/skin2/site	trunk/root/skin2/terms trunk/root/skin2/thread	trunk/root/skin2/user trunk/root/skin2/user/lostpassword	trunk/root/skin2/user/signup trunk/root/skin3	trunk/root/skin3/thread trunk/root/static/css">chiselwright at mail.berlios.de
       </A><BR>
    <I>Mon Dec 22 23:01:03 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000872.html">[Parley-svn] r990 - / trunk
</A></li>
        <LI>Next message: <A HREF="000874.html">[Parley-svn] r992 - / trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#873">[ date ]</a>
              <a href="thread.html#873">[ thread ]</a>
              <a href="subject.html#873">[ subject ]</a>
              <a href="author.html#873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: chiselwright
Date: 2008-12-22 23:01:00 +0100 (Mon, 22 Dec 2008)
New Revision: 991

Added:
   trunk/root/skin2/
   trunk/root/skin2/about/
   trunk/root/skin2/about/modules
   trunk/root/skin2/error/
   trunk/root/skin2/error/simple
   trunk/root/skin2/footer
   trunk/root/skin2/forum/
   trunk/root/skin2/forum/list
   trunk/root/skin2/forum/view
   trunk/root/skin2/header
   trunk/root/skin2/help/
   trunk/root/skin2/help/i_default/
   trunk/root/skin2/help/i_default/contents
   trunk/root/skin2/help/i_default/faq
   trunk/root/skin2/help/i_default/formatting_posts
   trunk/root/skin2/help/i_default/wide
   trunk/root/skin2/help/unknown
   trunk/root/skin2/menu/
   trunk/root/skin2/menu/left/
   trunk/root/skin2/menu/left/main
   trunk/root/skin2/menu/menubar
   trunk/root/skin2/menu/statusbar
   trunk/root/skin2/my/
   trunk/root/skin2/my/preferences
   trunk/root/skin2/my/selectplace_ajaxresult
   trunk/root/skin2/my/tab_avatar
   trunk/root/skin2/my/tab_notifications
   trunk/root/skin2/my/tab_time
   trunk/root/skin2/my/tab_watch
   trunk/root/skin2/my/tab_you
   trunk/root/skin2/post/
   trunk/root/skin2/post/edit
   trunk/root/skin2/search/
   trunk/root/skin2/search/forum
   trunk/root/skin2/shared/
   trunk/root/skin2/shared/ajax_dialog
   trunk/root/skin2/shared/autocomplete_style
   trunk/root/skin2/shared/focus_username_js
   trunk/root/skin2/shared/language_dialog
   trunk/root/skin2/shared/loading_please_wait
   trunk/root/skin2/shared/login_dialog
   trunk/root/skin2/shared/moderator_list
   trunk/root/skin2/shared/navigation
   trunk/root/skin2/shared/pager_advanced
   trunk/root/skin2/shared/postinfo_table_row
   trunk/root/skin2/shared/search_dialog
   trunk/root/skin2/shared/small_loading_please_wait
   trunk/root/skin2/shared/thread_watch
   trunk/root/skin2/shared/threadcrumbs
   trunk/root/skin2/shared/useful_tt_stuff
   trunk/root/skin2/shared/user_avatar
   trunk/root/skin2/shared/user_status
   trunk/root/skin2/site/
   trunk/root/skin2/site/ip_bans
   trunk/root/skin2/site/ip_info
   trunk/root/skin2/site/services
   trunk/root/skin2/site/user
   trunk/root/skin2/site/users
   trunk/root/skin2/terms/
   trunk/root/skin2/terms/accept
   trunk/root/skin2/terms/add
   trunk/root/skin2/terms/index
   trunk/root/skin2/thread/
   trunk/root/skin2/thread/add
   trunk/root/skin2/thread/recent
   trunk/root/skin2/thread/reply
   trunk/root/skin2/thread/reply-yuirte
   trunk/root/skin2/thread/view
   trunk/root/skin2/thread/watches
   trunk/root/skin2/user/
   trunk/root/skin2/user/access_ip_banned
   trunk/root/skin2/user/auth_emailed
   trunk/root/skin2/user/auth_success
   trunk/root/skin2/user/login
   trunk/root/skin2/user/login_ip_banned
   trunk/root/skin2/user/lostpassword/
   trunk/root/skin2/user/lostpassword/lost_password
   trunk/root/skin2/user/lostpassword/lost_password_details_sent
   trunk/root/skin2/user/lostpassword/reset
   trunk/root/skin2/user/lostpassword/reset_success
   trunk/root/skin2/user/posting_ip_banned
   trunk/root/skin2/user/profile
   trunk/root/skin2/user/signup/
   trunk/root/skin2/user/signup/signup
   trunk/root/skin2/user/signup_ip_banned
   trunk/root/skin2/user/suspended
   trunk/root/skin3/
   trunk/root/skin3/thread/
   trunk/root/skin3/thread/view
Modified:
   /
   trunk/root/static/css/parley-skin1.css
Log:
 <A HREF="https://lists.berlios.de/mailman/listinfo/parley-svn">r8655 at wiggin</A>:  chisel | 2008-12-22 09:12:57 +0000
 + skin2: a complete copy of base/ with a change to thread/view
 + skin2: only contains an overriding thread/view template file



Property changes on: 
___________________________________________________________________
Name: svk:merge
   - 6a361f96-f029-0410-94f8-848cdd0f6ccf:/local/parley:8654
6fba2e3f-c318-0410-85fa-910d1bc53201:/local/parley:5151
c0683b51-46fc-0310-adae-a083e7ee0929:/local/berlios/parley:15762
f1659af6-751b-0410-a472-c93ec2bf8afc:/local/parley:1222
   + 6a361f96-f029-0410-94f8-848cdd0f6ccf:/local/parley:8655
6fba2e3f-c318-0410-85fa-910d1bc53201:/local/parley:5151
c0683b51-46fc-0310-adae-a083e7ee0929:/local/berlios/parley:15762
f1659af6-751b-0410-a472-c93ec2bf8afc:/local/parley:1222

Added: trunk/root/skin2/about/modules
===================================================================
--- trunk/root/skin2/about/modules	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/about/modules	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,39 @@
+
+&lt;h1&gt;Loaded modules with a version number&lt;/h1&gt;
+&lt;table&gt;
+[% FOREACH module = loaded_module_data.sort('name') %]
+[% IF module.version &amp;&amp; ! (module.version == '-1, set by base.pm') %]
+&lt;tr&gt;
+&lt;td&gt;[% module.name %]&lt;/td&gt;
+&lt;td&gt;[% module.version || '&lt;i&gt;undefined&lt;/i&gt;' %]&lt;/td&gt;
+&lt;/tr&gt;
+[% END %]
+[% END %]
+&lt;/table&gt;
+
+
+
+&lt;h1&gt;Loaded modules with no version number&lt;/h1&gt;
+&lt;table&gt;
+[% FOREACH module = loaded_module_data.sort('name') %]
+[% IF ! module.version %]
+&lt;tr&gt;
+&lt;td&gt;[% module.name %]&lt;/td&gt;
+&lt;td&gt;[% module.version || '&lt;i&gt;undefined&lt;/i&gt;' %]&lt;/td&gt;
+&lt;/tr&gt;
+[% END %]
+[% END %]
+&lt;/table&gt;
+
+
+&lt;h1&gt;Loaded modules with version set by base.pm&lt;/h1&gt;
+&lt;table&gt;
+[% FOREACH module = loaded_module_data.sort('name') %]
+[% IF module.version == '-1, set by base.pm' %]
+&lt;tr&gt;
+&lt;td&gt;[% module.name %]&lt;/td&gt;
+&lt;td&gt;[% module.version || '&lt;i&gt;undefined&lt;/i&gt;' %]&lt;/td&gt;
+&lt;/tr&gt;
+[% END %]
+[% END %]
+&lt;/table&gt;

Added: trunk/root/skin2/error/simple
===================================================================
--- trunk/root/skin2/error/simple	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/error/simple	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,25 @@
+[% IF error %]
+&lt;h1&gt;[%l('An error has occurred')%]&lt;/h1&gt;
+
+&lt;p&gt;
+[%l('The following error message was returned by the application')%]:
+
+&lt;blockquote style=&quot;white-space:pre;&quot;&gt;[% error.message %]&lt;/blockquote&gt;
+&lt;/p&gt;
+[% END %]
+
+&lt;!-- offer the user the chance to return somewhere interesting --&gt;
+[% IF current_thread || current_forum %]
+&lt;ul&gt;
+    [% IF current_thread %]
+    [% IF authed_user %]
+    &lt;li&gt;[%l('Continue reading')%]: &lt;a href=&quot;thread/next_post?thread=[%current_thread.id%]&quot;&gt;[%current_thread.subject%]&lt;/a&gt;&lt;/li&gt;
+    [% END %]
+    &lt;li&gt;[%l('Return to')%]: &lt;a href=&quot;thread/view?thread=[%current_thread.id%]&quot;&gt;[%current_thread.subject%]&lt;/a&gt;&lt;/li&gt;
+    [% END %]
+
+    [% IF current_forum %]
+    &lt;li&gt;[%l('View all')%] &lt;a href=&quot;forum/view?forum=[%current_forum.id%]&quot;&gt;[%current_forum.name%]&lt;/a&gt; [%l('threads')%]&lt;/li&gt;
+    [% END %]
+&lt;/ul&gt;
+[% END %]

Added: trunk/root/skin2/footer
===================================================================
--- trunk/root/skin2/footer	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/footer	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,29 @@
+&lt;!-- Footer : Start --&gt;
+            &lt;/div&gt;&lt;!-- id=&quot;bd&quot; --&gt;
+
+            &lt;div id=&quot;ft&quot;&gt;
+                &lt;p&gt;
+                &lt;a href=&quot;<A HREF="http://developer.berlios.de/projects/parley">http://developer.berlios.de/projects/parley</A>&quot;&gt;[%c.config.name%]&lt;/a&gt;
+                (version [%c.config.version%])
+                &copy; Chisel Wright 2006-2008. [%l('All Rights Reserved')%].
+                &lt;/p&gt;
+            &lt;/div&gt;&lt;!-- id=&quot;ft&quot; --&gt;
+
+            &lt;span style=&quot;display: block; float: right; margin-right: 20px; margin-top: 5px;&quot;&gt;
+                &lt;a href=&quot;<A HREF="http://catalystframework.org">http://catalystframework.org</A>&quot;&gt;&lt;img
+                    src=&quot;static/images/btn_88x31_powered.png&quot;
+                    width=&quot;88&quot;
+                    height=&quot;31&quot;
+                    alt=&quot;Powered By Catalyst&quot;
+                    style=&quot;border: none;&quot;
+                    /&gt;&lt;/a&gt;
+            &lt;/span&gt;
+            [% PROCESS shared/search_dialog %]
+            [% PROCESS shared/small_loading_please_wait %]
+            [% PROCESS shared/login_dialog %]
+            [% PROCESS shared/language_dialog %]
+        &lt;/div&gt;&lt;!-- id=&quot;doc3&quot; --&gt;
+    &lt;/body&gt;
+&lt;/html&gt;
+&lt;!-- Footer : End --&gt;
+

Added: trunk/root/skin2/forum/list
===================================================================
--- trunk/root/skin2/forum/list	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/forum/list	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,46 @@
+&lt;h1&gt;[%l('Forum List')%]&lt;/h1&gt;
+
+&lt;table class=&quot;forum_list&quot;&gt;
+    &lt;tbody&gt;
+        [% WHILE (forum = forum_list.next) %]
+        [% toggler = (1 - (toggler||0)) %]
+        &lt;tr class=&quot;row [% row_styles.$toggler %]&quot;&gt;
+            &lt;td width=&quot;50%&quot;&gt;
+                &lt;div class=&quot;forum_name&quot;&gt;
+                    &lt;a href=&quot;[%c.uri_for('/forum/view',{'forum'=&gt;forum.id})%]&quot; class=&quot;forum_link&quot;&gt;[% HTML.escape(forum.name) %]&lt;/a&gt;
+                &lt;/div&gt;
+                &lt;div class=&quot;forum_description&quot;&gt;
+                    [% HTML.escape(forum.description) %]
+                &lt;/div&gt;
+            &lt;/td&gt;
+            &lt;td width=&quot;40%&quot;&gt;
+                &lt;div class=&quot;forum_lastpost&quot;&gt;
+                [% IF forum.last_post %]
+                &lt;div class=&quot;forum_lastpost_subject&quot;&gt;
+                    &lt;a href=&quot;[%c.uri_for('/thread/view',{thread=&gt;forum.last_post.thread_id})%]&quot; class=&quot;topic_link&quot;&gt;[% HTML.escape(forum.last_post.thread.subject) |truncate(55) %]&lt;/a&gt;
+                &lt;/div&gt;
+                &lt;div class=&quot;topic_creator&quot;&gt;
+                    [%l('posted by')%]
+                    [% HTML.escape(forum.last_post.creator.forum_name) %]
+                &lt;/div&gt;
+                &lt;div class=&quot;topic_lastpost_created&quot;&gt;
+                    [% forum.last_post.interval_ago %]
+                    [%l('ago')%]
+                &lt;/div&gt;
+                [% ELSE %]
+                &lt;div class=&quot;topic_creator&quot;&gt;
+                    [%l('No posts')%]
+                &lt;/div&gt;
+                [% END %]
+                &lt;/div&gt;
+            &lt;/td&gt;
+            &lt;td width=&quot;10%&quot;&gt;
+                &lt;div class=&quot;forum_postcount&quot;&gt;
+                    [% forum.post_count %]
+                    [%l('posts')%]
+                &lt;/div&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+        [% END %]
+    &lt;/tbody&gt;
+&lt;/table&gt;

Added: trunk/root/skin2/forum/view
===================================================================
--- trunk/root/skin2/forum/view	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/forum/view	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,30 @@
+&lt;h1&gt;[% current_forum.name %] : List Of Active Threads&lt;/h1&gt;
+
+[%- IF thread_list.count &gt; 0 %]
+
+&lt;div style=&quot;float:right; font-size: 85%;&quot;&gt;
+    &lt;span class=&quot;yui-button yui-link-button&quot;&gt;
+        &lt;span class=&quot;first-child&quot;&gt;
+            &lt;a href=&quot;[%c.uri_for('/thread/add',{'forum'=&gt;current_forum.id})%]&quot;&gt;[%l('Create New Thread')%]&lt;/a&gt;
+        &lt;/span&gt;
+    &lt;/span&gt;
+&lt;/div&gt;
+[% PROCESS shared/pager_advanced %]
+
+&lt;table class=&quot;forum_view&quot;&gt;
+    &lt;tbody&gt;
+        [%- WHILE (thread = thread_list.next) %]
+        [% PROCESS shared/postinfo_table_row %]
+        [% END %]
+        &lt;tr&gt;
+            &lt;td colspan=&quot;5&quot;&gt;
+                [% PROCESS shared/moderator_list %]
+            &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;/tbody&gt;
+&lt;/table&gt;
+
+[% PROCESS shared/pager_advanced %]
+[% ELSE %]
+  No active threads in this forum
+[% END %]

Added: trunk/root/skin2/header
===================================================================
--- trunk/root/skin2/header	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/header	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,115 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</A>&quot;&gt;
+
+[% PROCESS shared/useful_tt_stuff %]
+
+&lt;!-- Header : Start --&gt;
+&lt;html&gt;
+    &lt;head&gt;
+        &lt;base href=&quot;[% c.request.base %]&quot; /&gt;
+        &lt;title&gt;
+            [% c.config.name %]
+
+            [%# Show version if we're debugging %]
+            [% IF c.debug %]
+            ([% c.config.version %])
+            [% END %]
+
+            [%# Show custom page title if we have one %]
+            [% IF page_title %]
+             : [% page_title %]
+            [%# Show thread name if we have one %]
+            [% ELSIF current_thread %]
+             : [% current_thread.subject %]
+            [%# Show forum name if we have one %]
+            [% ELSIF current_forum %]
+             : [% current_forum.name %]
+            [% END %]
+        &lt;/title&gt;
+        &lt;meta name=&quot;author&quot; content=&quot;Chisel Wright&quot; /&gt;
+        &lt;link rel=&quot;shortcut icon&quot; href=&quot;[% c.request.base %]/favicon.ico&quot; type=&quot;image/x-icon&quot; /&gt;
+
+        &lt;!-- YUI ajax magick --&gt;
+
+        &lt;!-- CSS --&gt;
+        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/fonts/fonts-min.css')%]&quot; /&gt;
+        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/reset-fonts-grids/reset-fonts-grids.css')%]&quot; /&gt;
+
+        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/button/assets/skins/sam/button.css')%]&quot; /&gt;
+        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/container/assets/skins/sam/container.css')%]&quot; /&gt;
+        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/menu/assets/skins/sam/menu.css')%]&quot; /&gt; 
+        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/tabview/assets/skins/sam/tabview.css')%]&quot; /&gt;
+        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/autocomplete/assets/skins/sam/autocomplete.css')%]&quot; /&gt;
+
+        &lt;!-- Dependency source files --&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/yahoo-dom-event/yahoo-dom-event.js')%]&quot;&gt;&lt;/script&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/container/container-min.js')%]&quot;&gt;&lt;/script&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/utilities/utilities.js')%]&quot;&gt;&lt;/script&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/button/button-min.js')%]&quot;&gt;&lt;/script&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/menu/menu-min.js')%]&quot;&gt;&lt;/script&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/tabview/tabview-min.js')%]&quot;&gt;&lt;/script&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/autocomplete/autocomplete-min.js')%]&quot;&gt;&lt;/script&gt;
+
+        &lt;!-- homebrew javascript --&gt;
+        &lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/script/ajax_error_dlg.js')%]&quot;&gt;&lt;/script&gt;
+
+        [% IF ( (!c.config.site_skin) || (c.config.site_skin &amp;&amp; c.config.skin_default_fallback) ) %]
+            [% IF (!c.config.exists('skin_default_css') || c.config.skin_default_css) %]
+            &lt;!-- base styling --&gt;
+            &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; title=&quot;Simple&quot; href=&quot;[%c.uri_for('/static/css/parley-min.css')%]&quot; /&gt;
+            [% END %]
+        [% END %]
+        [% IF (skin = c.config.site_skin) %]
+        &lt;!-- Skin : [%skin%] --&gt;
+        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; title=&quot;Skin:[%skin%]&quot; href=&quot;[%c.uri_for(&quot;/static/css/parley-${skin}.css&quot;)%]&quot; /&gt;
+        [% END %]
+
+    &lt;/head&gt;
+
+    &lt;body class=&quot;yui-skin-sam&quot;&gt;
+        &lt;div id=&quot;doc4&quot;&gt;
+            &lt;div id=&quot;hd&quot;&gt;
+                &lt;div id=&quot;user_information&quot;&gt;
+                    [% IF authed_user %]
+                    &lt;em&gt;[% authed_user.forum_name %]&lt;/em&gt;
+                    [% ELSE %]
+                    &lt;em&gt;[%l('Guest User')%]&lt;/em&gt;
+                    [% END %]
+
+                    &nbsp;
+                    &lt;a href=&quot;javascript:YAHOO.parley.language.language_dialog.show();&quot;&gt;
+                        [% IF (country_code = c.language) %]
+                        &lt;img src=&quot;/static/images/icons/flags/[%country_code%].png&quot; width=&quot;16&quot; height=&quot;11&quot; alt=&quot;[%country_code%]&quot; /&gt;
+                        [% ELSE %]
+                        &lt;img src=&quot;/static/images/icons/flags/gb.png&quot; width=&quot;16&quot; height=&quot;11&quot; alt=&quot;GB&quot; /&gt;
+                        [% END %]
+                    &lt;/a&gt;
+                    [% IF authed_user %]
+                    &lt;div class=&quot;user_info_actions&quot;&gt;
+                        [
+                            &lt;a href=&quot;[%c.uri_for('/user/logout')%]&quot;&gt;[%l('Logout')%]&lt;/a&gt;
+                        ]
+                    &lt;/div&gt;
+                    [% ELSE %]
+                    &lt;div class=&quot;user_info_actions&quot;&gt;
+                        [
+                            &lt;a href=&quot;javascript:YAHOO.parley.login.login_dialog.show();&quot;&gt;[%l('Login')%]&lt;/a&gt;
+                        [%l('or')%]
+                            &lt;a href=&quot;[%c.uri_for('/user/signup')%]&quot;&gt;[%l('Register')%]&lt;/a&gt;
+                        ]
+                    &lt;/div&gt;
+                    [% END %]
+                &lt;/div&gt;
+            &lt;/div&gt;&lt;!-- id=&quot;hd&quot; --&gt;
+
+            &lt;div id=&quot;bd&quot;&gt;
+                [% PROCESS menu/menubar %]
+
+                [% IF view.error.messages %]
+                &lt;div class=&quot;error_messages&quot;&gt;
+                    [% FOREACH msg IN view.error.messages %]
+                    [% msg %]&lt;br /&gt;
+                    [% END %]
+                &lt;/div&gt;
+                [% END %]
+&lt;!-- Header : End --&gt;

Added: trunk/root/skin2/help/i_default/contents
===================================================================
--- trunk/root/skin2/help/i_default/contents	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/help/i_default/contents	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,19 @@
+&lt;h1&gt;Help Contents&lt;/h1&gt;
+
+&lt;p&gt;Obviously this page needs a bit more content, but we all have to start
+somewhere.&lt;/p&gt;
+
+&lt;h2&gt;General Help&lt;/h2&gt;
+&lt;ol start=&quot;1&quot;&gt;
+&lt;li&gt;&lt;a href=&quot;help/faq&quot;&gt;Frequently Asked Questions&lt;/a&gt;&lt;/li&gt;
+&lt;/ol&gt;
+
+&lt;h2&gt;Posting&lt;/h2&gt;
+&lt;ol start=&quot;2&quot;&gt;
+    &lt;li&gt;&lt;a href=&quot;help/formatting_posts&quot;&gt;Adding (ForumCode) formatting to posts&lt;/a&gt;&lt;/li&gt;
+&lt;/ol&gt;
+
+&lt;h2&gt;General Information&lt;/h2&gt;
+&lt;ol start=&quot;3&quot;&gt;
+    &lt;li&gt;&lt;a href=&quot;terms&quot;&gt;Terms &amp; Conditions&lt;/a&gt;&lt;/li&gt;
+&lt;/ol&gt;

Added: trunk/root/skin2/help/i_default/faq
===================================================================
--- trunk/root/skin2/help/i_default/faq	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/help/i_default/faq	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,81 @@
+&lt;h1&gt;Frequently Asked Questions&lt;/h1&gt;
+
+&lt;p&gt;This page should answer common queries and problems.
+If it doesn't you're just being difficult *wink*&lt;/p&gt;
+
+&lt;h3&gt;General Questions&lt;/h3&gt;
+
+&lt;ol class=&quot;help&quot;&gt;
+    &lt;li&gt;
+    &lt;b&gt;Does the world need another piece of forum/message board software?&lt;/b&gt;
+    &lt;br /&gt;
+    &lt;em&gt;
+    Possibly not. This is a personal quest for me. If it's useful to someone
+    else that's even better.&lt;br /&gt;
+    I've always thought that the Perl landscape was missing a well-written
+    and functional forum application.&lt;br /&gt;
+    Add to that the emergence of the
+    &lt;a href=&quot;<A HREF="http://catalystframework.org/">http://catalystframework.org/</A>&quot;&gt;Catalyst framework&lt;/a&gt;
+    and a desire to explore the benefits of this project and you've got Parley.
+    &lt;/em&gt;
+    &lt;/li&gt;
+&lt;/ol&gt;
+
+&lt;h3&gt;Technical Questions&lt;/h3&gt;
+
+&lt;ol class=&quot;help&quot;&gt;
+    &lt;li&gt;
+    &lt;b&gt;What software does this forum run on?&lt;/b&gt;
+    &lt;br /&gt;
+    &lt;em&gt;
+    The core elements of the application are:
+    &lt;a href=&quot;<A HREF="http://perl.com/">http://perl.com/</A>&quot;&gt;Perl&lt;/a&gt;,
+    &lt;a href=&quot;<A HREF="http://postgresql.org/">http://postgresql.org/</A>&quot;&gt;PostgreSQL&lt;/a&gt;
+    and
+    &lt;a href=&quot;<A HREF="http://template-toolkit.org/">http://template-toolkit.org/</A>&quot;&gt;Template Toolkit&lt;/a&gt;.
+    These elements are all tied together using the
+    &lt;a href=&quot;<A HREF="http://catalystframework.org/">http://catalystframework.org/</A>&quot;&gt;Catalyst framework&lt;/a&gt;.
+    &lt;/em&gt;
+    &lt;/li&gt;
+
+    &lt;li&gt;
+    &lt;b&gt;PostgreSQL?! What about MySQL, SQLite, ...?&lt;/b&gt;
+    &lt;br /&gt;
+    &lt;em&gt;
+    I prefer PostgreSQL. I don't have the time or energy to make the application
+    compatible with everyone's preferred database. I'll happily accept patches
+    that don't break the application's coupling with PostgreSQL.
+    &lt;/em&gt;
+    &lt;/li&gt;
+
+    &lt;li&gt;
+    &lt;b&gt;How do I get my own copy?&lt;/b&gt;
+    &lt;br /&gt;
+    &lt;em&gt;
+    You can download releases of Parley from Berlios. Just visit the
+    &lt;a href=&quot;<A HREF="http://developer.berlios.de/projects/parley/">http://developer.berlios.de/projects/parley/</A>&quot;&gt;Parley Project
+    Page&lt;/a&gt;.
+    &lt;/em&gt;
+    &lt;/li&gt;
+
+    &lt;li&gt;
+    &lt;b&gt;How much does it cost?&lt;/b&gt;
+    &lt;br /&gt;
+    &lt;em&gt;
+    Other than your time and effort, it's &lt;i&gt;free&lt;/i&gt;. The project has been
+    written and released under the
+    &lt;a href=&quot;<A HREF="http://www.opensource.org/licenses/artistic-license.php">http://www.opensource.org/licenses/artistic-license.php</A>&quot;&gt;Artistic License&lt;/a&gt;.
+    &lt;/em&gt;
+    &lt;/li&gt;
+
+    &lt;li&gt;
+    &lt;b&gt;Why is it taking you so long?&lt;/b&gt;
+    &lt;br /&gt;
+    &lt;em&gt;
+    Parley is my &quot;commuting project&quot;. Ninety-five percent of the work on the
+    project has taken place on my commute to work. That's two forty-five
+    minute train journeys [it's really hard to operate a laptop whilst cycling
+    the remainder of the journey!] each day!
+    &lt;/em&gt;
+    &lt;/li&gt;
+&lt;/ol&gt;

Added: trunk/root/skin2/help/i_default/formatting_posts
===================================================================
--- trunk/root/skin2/help/i_default/formatting_posts	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/help/i_default/formatting_posts	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,242 @@
+&lt;h1&gt;Formatting Posts&lt;/h1&gt;
+
+&lt;p&gt;Allowing raw HTML markup in posts leads to a very special
+world of pain. With that in mind a form of markup inspired by
+&lt;a href=&quot;<A HREF="http://www.phpbb.com/community/faq.php?mode=bbcode">http://www.phpbb.com/community/faq.php?mode=bbcode</A>&quot;&gt;BBCode&lt;/a&gt;
+was developed for this project. As it's
+not an identical implementation of BBCode it has it's own name
+- &lt;i&gt;ForumCode&lt;/i&gt;&lt;/p&gt;
+
+&lt;h2&gt;Simple Formatting&lt;/h2&gt;
+
+&lt;h3&gt;Bold, Italic and Underline&lt;/h3&gt;
+&lt;ul class=&quot;help&quot;&gt;
+    &lt;li&gt;
+        To make a section of text appear in &lt;b&gt;bold&lt;/b&gt; use
+        &lt;code&gt;[b]...[/b]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[b]This is bold text[/b]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[b]This is bold text[/b]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        To make a section of text appear in &lt;em&gt;italics&lt;/em&gt; use
+        &lt;code&gt;[i]...[/i]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[i]This is emphasised text[/i]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[i]This is emphasised text[/i]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        To make a section of text appear &lt;em&gt;underlined&lt;/em&gt; use
+        &lt;code&gt;[u]...[/u]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[u]This is emphasised text[/u]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[u]This is underlined text[/u]') %]
+    &lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;h3&gt;Making Lists&lt;/h3&gt;
+&lt;p&gt;There are two types of list, ordered - the items are numbered, and unordered - the
+items are bulleted. Lists are always enclosed by &lt;code&gt;[list]...[/list]&lt;/code&gt; markers.
+The type of list you create is dependant on whether you use &lt;code&gt;[1]&lt;/code&gt; or &lt;code&gt;[*]&lt;/code&gt;
+for list items.
+&lt;/p&gt;
+&lt;ul class=&quot;help&quot;&gt;
+    &lt;li&gt;
+        To create an &lt;em&gt;ordered list&lt;/em&gt; use &lt;code&gt;[1]&lt;/code&gt;
+        to mark list items.
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[list]&lt;br /&gt;
+                [1]first&lt;br /&gt;
+                [1]second&lt;br /&gt;
+                [1]third&lt;br /&gt;
+        [/list]&lt;/code&gt;&lt;/q&gt;
+        &lt;br /&gt;
+        produces:
+        [% ForumCode.forumcode('[list]
+        [1]first
+        [1]second
+        [1]third
+        [/list]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        To create an &lt;em&gt;unordered list&lt;/em&gt; use &lt;code&gt;[*]&lt;/code&gt;
+        to mark list items.
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[list]&lt;br /&gt;
+                [*]apple&lt;br /&gt;
+                [*]orange&lt;br /&gt;
+                [*]banana&lt;br /&gt;
+        [/list]&lt;/code&gt;&lt;/q&gt;
+        &lt;br /&gt;
+        produces:
+        [% ForumCode.forumcode('[list]
+        [*]apple
+        [*]orange
+        [*]banana
+        [/list]') %]
+    &lt;/li&gt;
+&lt;/ul&gt;
+&lt;p&gt;&lt;b&gt;NOTE:&lt;/b&gt; Separating elements with line-breaks is required.
+&lt;q&gt;&lt;code&gt;[list] [*]apple [*]orange [*]banana [/list]&lt;/code&gt;&lt;/q&gt; will output:&lt;br /&gt;
+[% ForumCode.forumcode('[list] [*]apple [*]orange [*]banana [/list]') %]
+&lt;/p&gt;
+
+&lt;h3&gt;Blocks and quoting&lt;/h3&gt;
+&lt;p&gt;At times it can be useful to have blocks in a post that stand out in some
+way, or are a fixed width font - for posting code examples. This is where
+[pre]...[/pre], [code]...[/code] and [quote]...[/quote] come into play.&lt;/p&gt;
+
+&lt;ul class=&quot;help&quot;&gt;
+    &lt;li&gt;
+        To mark a block of code as 'preformatted' use
+        &lt;code&gt;[pre]...[/pre]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[pre]Something interesting[/pre]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[pre]Something interesting[/pre]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        To mark a block of code as 'code' use
+        &lt;code&gt;[code]...[/code]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[code]my $tt_forum  = Template::Plugin::ForumCode-&gt;new();[/code]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[code]my $tt_forum  = Template::Plugin::ForumCode-&gt;new();[/code]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        To mark a block of code as 'quoted' use
+        &lt;code&gt;[quote]...[/quote]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[quote]Something someone said in an earlier post[/quote]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[quote]Something someone said in an earlier post[/quote]') %]
+    &lt;/li&gt;
+    &lt;li&gt;To specify the author of the quoted block use
+        &lt;code&gt;[quote quoting=&quot;name&quot;]...[/quote]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[quote quoting=&quot;Chisel&quot;]Something Chisel said in an earlier post[/quote]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[quote quoting=&quot;Chisel&quot;]Something Chisel said in an earlier post[/quote]') %]
+    &lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;h3&gt;Linking to external resources&lt;/h3&gt;
+&lt;p&gt;The forum software does NOT automatically hunt out all text resembling URLs
+to turn them into clickable links. If you want a clickable link in a post
+you need to use the [url]...[/url] code:&lt;/p&gt;
+&lt;ul class=&quot;help&quot;&gt;
+    &lt;li&gt;
+        To make a URL appear as a clickable link use
+        &lt;code&gt;[url]<A HREF="http://...[/url">http://...[/url</A>]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[url]<A HREF="http://google.com/[/url">http://google.com/[/url</A>]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[url]<A HREF="http://google.com/[/url">http://google.com/[/url</A>]') %]
+    &lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;p&gt;You may also make a section of text appear as a named link by
+using the &quot;name=...&quot; attribute in the code block:&lt;/p&gt;
+&lt;ul class=&quot;help&quot;&gt;
+    &lt;li&gt;
+        To make a URL appear as a names clickable link use
+        &lt;code&gt;[url &lt;em&gt;name=&quot;XXX&quot;&lt;/em&gt;]<A HREF="http://...[/url">http://...[/url</A>]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[url name=&quot;Google&quot;]<A HREF="http://google.com/[/url">http://google.com/[/url</A>]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[url name=&quot;Google&quot;]<A HREF="http://google.com/[/url">http://google.com/[/url</A>]') %]
+    &lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;p&gt;As well as inserting clickable links, you may also insert images into posts.&lt;/p&gt;
+&lt;ul class=&quot;help&quot;&gt;
+    &lt;li&gt;
+        To make an image appear in a posting use
+        &lt;code&gt;[img]...[/img]&lt;/code&gt;:
+        &lt;br /&gt;
+        &lt;em&gt;e.g.&lt;/em&gt;
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[img][%c.request.base%]static/images/btn_88x31_powered.png[/img]&lt;/code&gt;&lt;/q&gt;
+        produces
+        &lt;br /&gt;
+        [% ForumCode.forumcode(&quot;[img]${c.request.base}static/images/btn_88x31_powered.png[/img]&quot;) %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        You may also include extra attributes such as
+        &lt;code&gt;title=&lt;/code&gt;, &lt;code&gt;alt=&lt;/code&gt;, etc.
+        Research the HTML
+        &lt;a href=&quot;<A HREF="http://www.w3schools.com/tags/tag_img.asp">http://www.w3schools.com/tags/tag_img.asp</A>&quot;&gt;&lt;img&gt; tag&lt;/a&gt;
+        for the full list of attributes.
+        &lt;br /&gt;
+        &lt;q&gt;&lt;code&gt;[img title='Powered by Catalyst' width='50'][%c.request.base%]static/images/btn_88x31_powered.png[/img]&lt;/code&gt;&lt;/q&gt;
+        produces
+        &lt;br /&gt;
+        [% ForumCode.forumcode(&quot;[img title='Powered by Catalyst' width='50']${c.request.base}static/images/btn_88x31_powered.png[/img]&quot;) %]
+    &lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;h3&gt;Colouring&lt;/h3&gt;
+&lt;p&gt;One surefire way to annoy people to the point where they'd like to remove
+your internal organs with a spoon is to use lots of unnecessary colours in your posts.
+The ForumCode to invoke this reaction is
+&lt;code&gt;[colour=&lt;em&gt;code&lt;/em&gt;]...[/colour]&lt;/code&gt;. In the spirit of furthering international
+relations, those of you with a preference for American spellings may use &lt;code&gt;[color=&lt;em&gt;code&lt;/em&gt;]...[/color]&lt;/code&gt;.
+&lt;/p&gt;
+&lt;p&gt;&lt;code&gt;&lt;em&gt;code&lt;/em&gt;&lt;/code&gt; can be any of the following: red, orange, yellow, green, blue, black, white.&lt;/p&gt;
+&lt;p&gt;&lt;code&gt;&lt;em&gt;code&lt;/em&gt;&lt;/code&gt; can also be any #RGB or #RRGGBB HTML colour values.&lt;/p&gt;
+
+&lt;em&gt;e.g.&lt;/em&gt;
+&lt;ul class=&quot;help&quot;&gt;
+    &lt;li&gt;
+        &lt;q&gt;&lt;code&gt;[colour=red]Red Text[/colour]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[colour=red]Red Text[/colour]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        &lt;q&gt;&lt;code&gt;[colour=#f00]Red Text[/colour]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[colour=#f00]Red Text[/colour]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        &lt;q&gt;&lt;code&gt;[colour=#ff0000]Red Text[/colour]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[colour=#ff0000]Red Text[/colour]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        &lt;q&gt;&lt;code&gt;[colour=blue]Blue Text[/colour]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[colour=blue]Blue Text[/colour]') %]
+    &lt;/li&gt;
+    &lt;li&gt;
+        &lt;q&gt;&lt;code&gt;[colour=white]White Text[/colour]&lt;/code&gt;&lt;/q&gt;
+        produces
+        [% ForumCode.forumcode('[colour=white]White Text[/colour]') %]
+        &lt;br /&gt;(usually white-on-white text, useful for novice spies; highlight the
+        line to see the white-on-white text)
+    &lt;/li&gt;
+&lt;/ul&gt;

Added: trunk/root/skin2/help/i_default/wide
===================================================================
--- trunk/root/skin2/help/i_default/wide	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/help/i_default/wide	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,10 @@
+&lt;style type=&quot;text/css&quot;&gt;
+    .not_wide {
+        border:     3px groove blue;
+        overflow:   auto;
+        max-width:  95%;
+    }
+&lt;/style&gt;
+
+
+&lt;img src=&quot;<A HREF="http://localhost/images/davina.jpg">http://localhost/images/davina.jpg</A>&quot; class=&quot;not_wide&quot; /&gt;

Added: trunk/root/skin2/help/unknown
===================================================================
--- trunk/root/skin2/help/unknown	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/help/unknown	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,7 @@
+&lt;h1&gt;Help Item Not Found&lt;/h1&gt;
+
+&lt;p&gt;&lt;i&gt;[% template_name %]&lt;/i&gt; doesn't relate to a known
+page in the help system.&lt;/p&gt;
+
+&lt;p&gt;See if you can find what you want from the
+&lt;a href=&quot;help&quot;&gt;contents&lt;/a&gt; page.&lt;/p&gt;

Added: trunk/root/skin2/menu/left/main
===================================================================
--- trunk/root/skin2/menu/left/main	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/menu/left/main	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,22 @@
+&lt;p&gt;
+    &lt;!-- General Stuff --&gt;
+    &lt;a href=&quot;thread/recent&quot;&gt;Recent Threads&lt;/a&gt;
+&lt;/p&gt;
+
+&lt;p&gt;
+    &lt;!-- My --&gt;
+
+    &lt;!-- Preferences --&gt;
+    &lt;a href=&quot;my/preferences&quot;&gt;Preferences&lt;/a&gt;
+&lt;/p&gt;
+
+&lt;p&gt;
+    &lt;!-- Admin --&gt;
+    &lt;a href=&quot;admin&quot;&gt;Admin&lt;/a&gt;
+&lt;/p&gt;
+
+&lt;p&gt;
+    &lt;!-- Searching --&gt;
+    &lt;a href=&quot;javascript:;&quot; onclick=&quot;search_dialog.show(); return false;&quot;&gt;Search&lt;/a&gt;
+    [% INCLUDE shared/search_dialog %]
+&lt;/p&gt;

Added: trunk/root/skin2/menu/menubar
===================================================================
--- trunk/root/skin2/menu/menubar	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/menu/menubar	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,157 @@
+&lt;!-- menubar (YUI) --&gt;
+[%- IF NOT current_forum  %][% SET  forum_disabled=' disabled' %][% END %]
+[%- IF NOT current_thread %][% SET thread_disabled=' disabled' %][% END %]
+&lt;!-- Page-specific script --&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    // Initialize and render the menu bar when it is available in the DOM
+    YAHOO.util.Event.onContentReady(&quot;parley_navbar&quot;, function () { var
+    oMenuBar = new YAHOO.widget.MenuBar(&quot;parley_navbar&quot;, { autosubmenudisplay: false, hidedelay: 250, lazyload: true }); oMenuBar.render();
+    });
+&lt;/script&gt;
+
+&lt;!-- start: stack grids here --&gt;
+&lt;div id=&quot;parley_navbar&quot; class=&quot;yuimenubar yuimenubarnav&quot;&gt;
+    &lt;div class=&quot;bd&quot;&gt;
+        &lt;ul class=&quot;first-of-type&quot;&gt;
+            &lt;li class=&quot;yuimenubaritem first-of-type&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;#&quot;&gt;[%l('Go')%]&lt;/a&gt;
+                &lt;div id=&quot;menu_go&quot; class=&quot;yuimenu&quot;&gt;
+                    &lt;div class=&quot;bd&quot;&gt;                                        
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;[%c.request.base%]&quot;&gt;[%l('Main Page')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;[%c.request.base%]forum/list&quot;&gt;[%l('Forum Summary')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;[%c.request.base%]thread/recent&quot;&gt;[%l('Recently Updated Threads')%]&lt;/a&gt;&lt;/li&gt;
+                        &lt;/ul&gt;
+
+                        &lt;ul&gt;
+                            [% WHILE (forum = available_forums.next) %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;forum/view?forum=[%forum.id%]&quot;&gt;[% forum.name %]&lt;/a&gt;&lt;/li&gt;
+                            [% END %]
+                        &lt;/ul&gt;
+                    &lt;/div&gt;
+                &lt;/div&gt;                                        
+            &lt;/li&gt;
+            &lt;li class=&quot;yuimenubaritem&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;#&quot;&gt;[%l('Forum')%]&lt;/a&gt;
+                &lt;div id=&quot;menu_forum&quot; class=&quot;yuimenu&quot;&gt;
+                    &lt;div class=&quot;bd&quot;&gt;                                        
+                        [% IF current_forum %]
+                        &lt;h6 class=&quot;first-of-type&quot;&gt;[% ForumCode.escape(current_forum.name) %]&lt;/h6&gt;
+                        [% END %]
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel[%forum_disabled%]&quot; href=&quot;[%IF forum_disabled%]#[%ELSE%]forum/view?forum=[%current_forum.id%][%END%]&quot;&gt;[%l('View Threads')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel[%forum_disabled%]&quot; href=&quot;[%IF forum_disabled%]#[%ELSE%]thread/add?forum=[%current_forum.id%][%END%]&quot;&gt;[%l('Create New Thread')%]&lt;/a&gt;&lt;/li&gt;
+                        &lt;/ul&gt;
+                    &lt;/div&gt;
+                &lt;/div&gt;                                        
+            &lt;/li&gt;
+            &lt;li class=&quot;yuimenubaritem&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;#&quot;&gt;[%l('Thread')%]&lt;/a&gt;
+                &lt;div id=&quot;menu_thread&quot; class=&quot;yuimenu&quot;&gt;
+                    &lt;div class=&quot;bd&quot;&gt;                                        
+                        [% IF current_thread %]
+                        &lt;h6 class=&quot;first-of-type&quot;&gt;[%ForumCode.escape(current_thread.subject)|truncate(25)%]&lt;/h6&gt;
+                        [% END %]
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel[%thread_disabled%]&quot; href=&quot;[%IF thread_disabled%]#[%ELSE%]thread/reply?thread=[%current_thread.id%][%END%]&quot;&gt;[%l('Add Reply')%]&lt;/a&gt;&lt;/li&gt;
+                            [%- IF watching_thread %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel[%thread_disabled%]&quot; href=&quot;[%IF thread_disabled%]#[%ELSE%]thread/watch?thread=[%current_thread.id%]&amp;page=[%page.current_page%]&amp;watch=0[%END%]&quot;&gt;[%l('Remove Watch')%]&lt;/a&gt;&lt;/li&gt;
+                            [%- ELSE %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel[%thread_disabled%]&quot; href=&quot;[%IF thread_disabled%]#[%ELSE%]thread/watch?thread=[%current_thread.id%]&amp;page=[%page.current_page%]&amp;watch=1[%END%]&quot;&gt;[%l('Add Watch')%]&lt;/a&gt;&lt;/li&gt;
+                            [%- END %]
+                        &lt;/ul&gt;
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel[%forum_disabled%]&quot; href=&quot;[%IF forum_disabled%]#[%ELSE%]thread/add?forum=[%current_forum.id%][%END%]&quot;&gt;[%l('Create New Thread')%]&lt;/a&gt;&lt;/li&gt;
+                        &lt;/ul&gt;
+                    &lt;/div&gt;
+                &lt;/div&gt;
+            &lt;/li&gt;
+
+            &lt;li class=&quot;yuimenubaritem&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;javascript:YAHOO.parley.search.search_dialog.show();&quot;&gt;[%l('Search')%]&lt;/a&gt;
+            &lt;/li&gt;
+
+            &lt;li class=&quot;yuimenubaritem&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;#&quot;&gt;[%l('Me')%]&lt;/a&gt;
+                &lt;div id=&quot;menu_my&quot; class=&quot;yuimenu&quot;&gt;
+                    &lt;div class=&quot;bd&quot;&gt;                                        
+                        [% IF authed_user %]
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;my/preferences&quot;&gt;[%l('My Preferences')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;thread/watches&quot;&gt;[%l('My Watched Threads')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;user/profile?user=[%authed_user.id%]&quot;&gt;[%l('My Profile')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;user/logout&quot;&gt;[%l('Logout')%]&lt;/a&gt;&lt;/li&gt;
+                        &lt;/ul&gt;
+                        [% ELSE %]
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;javascript:YAHOO.parley.login.login_dialog.show();&quot;&gt;[%l('Login')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;user/signup&quot;&gt;[%l('Register')%]&lt;/a&gt;&lt;/li&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;user/password/forgotten&quot;&gt;[%l('Password Reminder')%]&lt;/a&gt;&lt;/li&gt;
+                        &lt;/ul&gt;
+                        [% END %]
+                    &lt;/div&gt;
+                &lt;/div&gt;                                        
+            &lt;/li&gt;
+            [% IF moderator %]
+            &lt;li class=&quot;yuimenubaritem&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;#&quot;&gt;[%l('Moderate')%]&lt;/a&gt;
+                &lt;div id=&quot;menu_moderate&quot; class=&quot;yuimenu&quot;&gt;
+                    &lt;div class=&quot;bd&quot;&gt;                                        
+                        &lt;ul&gt;
+                            [% IF current_thread.locked %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;admin/lock?thread=[%current_thread.id%]&amp;lock=0&quot;&gt;[%l('Unlock Thread')%]&lt;/a&gt;&lt;/li&gt;
+                            [% ELSE %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;admin/lock?thread=[%current_thread.id%]&amp;lock=1&quot;&gt;[%l('Lock Thread')%]&lt;/a&gt;&lt;/li&gt;
+                            [% END %]
+
+                            [% IF current_thread.sticky %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a
+                            class=&quot;yuimenuitemlabel&quot; href=&quot;admin/sticky?thread=[%current_thread.id%]&amp;sticky=0&quot;&gt;[%l('Unstick Thread')%]&lt;/a&gt;&lt;/li&gt;
+                            [% ELSE %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a
+                            class=&quot;yuimenuitemlabel&quot; href=&quot;admin/sticky?thread=[%current_thread.id%]&amp;sticky=1&quot;&gt;[%l('Stick Thread')%]&lt;/a&gt;&lt;/li&gt;
+                            [% END %]
+                        &lt;/ul&gt;
+                    &lt;/div&gt;
+                &lt;/div&gt;                                        
+            &lt;/li&gt;
+            [% END %]
+            [% IF authed_user.can_view_site_menu %]
+            &lt;li class=&quot;yuimenubaritem&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;#&quot;&gt;[%l('Site')%]&lt;/a&gt;
+                &lt;div id=&quot;menu_site_moderate&quot; class=&quot;yuimenu&quot;&gt;
+                    &lt;div class=&quot;bd&quot;&gt;                                        
+                        &lt;ul&gt;
+                            [% IF authed_user.is_site_moderator %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;terms/add&quot;&gt;[%l('Add T-and-Cs')%]&lt;/a&gt;&lt;/li&gt;
+                            [% END %]
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;#&quot;&gt;[%l('Manage')%]&lt;/a&gt;
+                                &lt;div id=&quot;site&quot; class=&quot;yuimenu&quot;&gt;
+                                    &lt;div class=&quot;bd&quot;&gt;
+                                        &lt;ul class=&quot;first-of-type&quot;&gt;
+                                            [% IF authed_user.is_site_moderator %]
+                                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;site/services&quot;&gt;[%l('Services')%]&lt;/a&gt;&lt;/li&gt;
+                                            [% END %]
+                                            [% IF authed_user.is_site_moderator %]
+                                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;site/users&quot;&gt;[%l('Users')%]&lt;/a&gt;&lt;/li&gt;
+                                            [% END %]
+                                            [% IF authed_user.can_ip_ban %]
+                                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;site/ip_bans&quot;&gt;[%l('IP Bans')%]&lt;/a&gt;&lt;/li&gt;
+                                            [% END %]
+                                        &lt;/ul&gt;            
+                                    &lt;/div&gt;
+                                &lt;/div&gt;                    
+                            &lt;/li&gt;
+                        &lt;/ul&gt;
+                    &lt;/div&gt;
+                &lt;/div&gt;                                        
+            &lt;/li&gt;
+            [% END %]
+            &lt;li class=&quot;yuimenubaritem&quot;&gt;&lt;a class=&quot;yuimenubaritemlabel&quot; href=&quot;#&quot;&gt;[%l('Help')%]&lt;/a&gt;
+                &lt;div id=&quot;menu_help&quot; class=&quot;yuimenu&quot;&gt;
+                    &lt;div class=&quot;bd&quot;&gt;                                        
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;help&quot;&gt;[%l('Contents')%]&lt;/a&gt;&lt;/li&gt;
+                        &lt;/ul&gt;
+                        &lt;ul&gt;
+                            &lt;li class=&quot;yuimenuitem&quot;&gt;&lt;a class=&quot;yuimenuitemlabel&quot; href=&quot;terms&quot;&gt;[%l('Terms and Conditions')%]&lt;/a&gt;&lt;/li&gt;
+                        &lt;/ul&gt;
+                    &lt;/div&gt;
+                &lt;/div&gt;                                        
+            &lt;/li&gt;
+        &lt;/ul&gt;            
+    &lt;/div&gt;
+&lt;/div&gt;

Added: trunk/root/skin2/menu/statusbar
===================================================================
--- trunk/root/skin2/menu/statusbar	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/menu/statusbar	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,44 @@
+&lt;!-- status bar : start --&gt;
+
+&lt;table width=&quot;100%&quot;&gt;
+        &lt;tr&gt;
+                &lt;td width=&quot;60%&quot; class=&quot;left&quot;&gt;
+                    &lt;a href=&quot;forum/list&quot;&gt;Home&lt;/a&gt;
+                    [% IF current_forum %]
+                      &raquo;
+                      &lt;a href=&quot;forum/view?forum=[% current_forum.id %]&quot;&gt;[% current_forum.name %]&lt;/a&gt;
+                      [% IF current_thread %]
+                        &raquo;
+                        &lt;a href=&quot;thread/view?thread=[% current_thread.id %]&quot;&gt;[% ForumCode.escape(current_thread.subject) %]&lt;/a&gt;
+                      [% END %]
+                    [% END %]
+                &lt;/td&gt;
+
+                &lt;td width=&quot;40%&quot; class=&quot;right&quot;&gt;
+                        [% IF (authed_user) %]
+                        Logged in as &lt;b&gt;[% authed_user.first_name %] [% authed_user.last_name %]&lt;/b&gt;
+                        [% UNLESS authed_user.authentication.authenticated %]
+                        (&lt;b&gt;&lt;i&gt;Not Authenticated&lt;/i&gt;&lt;/b&gt;)
+                        [% END %]
+                        &lt;i&gt;[
+                                &lt;a href=&quot;user/logout&quot;&gt;Logout&lt;/a&gt;
+                        ]&lt;/i&gt;
+                        [% ELSE %]
+            &lt;i&gt;[
+            &lt;a href=&quot;javascript:;&quot; onclick=&quot;login_dialog.show(); return false;&quot;&gt;Login&lt;/a&gt;
+            |
+            &lt;a href=&quot;user/signup&quot;&gt;Signup&lt;/a&gt;
+            ]&lt;/i&gt;
+                        [% END %] [%# authed_user end %]
+
+
+                &lt;/td&gt;
+
+                &lt;td&gt;
+                &lt;/td&gt;
+        &lt;/tr&gt;
+&lt;/table&gt;
+
+[% INCLUDE shared/login_dialog %]
+
+&lt;!-- status bar : end --&gt;

Added: trunk/root/skin2/my/preferences
===================================================================
--- trunk/root/skin2/my/preferences	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/my/preferences	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,46 @@
+&lt;h1&gt;[%l('Your Preferences')%]&lt;/h1&gt;
+
+[% IF view.error.message %]
+&lt;div class=&quot;error_feedback&quot;&gt;
+    [% view.error.message %]
+    &lt;ul&gt;
+        [% FOREACH message IN view.error.messages %]
+            &lt;li&gt;[% message %]&lt;/li&gt;
+        [% END %]
+    &lt;/ul&gt;
+&lt;/div&gt;
+[% END %]
+
+&lt;div id=&quot;tabbed_prefs&quot; class=&quot;yui-navset&quot; style=&quot;max-width: 80%; margin-left: auto; margin-right: auto;&quot;&gt;
+    [% tab_info = [
+            { label =&gt; l('Your Details'),       tab_name =&gt; 'tab_you' },
+            { label =&gt; l('Time'),               tab_name =&gt; 'tab_time' },
+            { label =&gt; l('Notifications'),      tab_name =&gt; 'tab_notifications' },
+            { label =&gt; l('Avatar'),             tab_name =&gt; 'tab_avatar' },
+       ]
+    %]
+    [% SET selected_tab = c.flash.show_pref_tab || 'tab_you' %]
+
+    &lt;ul class=&quot;yui-nav&quot;&gt;
+    [% FOR tab IN tab_info %]
+        &lt;li[% IF tab.tab_name == selected_tab %] class=&quot;selected&quot;[%END%]&gt;&lt;a href=&quot;#[% tab.tab_name %]&quot;&gt;&lt;em&gt;[% tab.label %]&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
+    [% END %]
+    &lt;/ul&gt;            
+
+    &lt;div class=&quot;yui-content&quot; style=&quot;min-height: 200px;&quot;&gt;
+    [% FOR tab IN tab_info %]
+        &lt;div id=&quot;[% tab.tab_name %]&quot;&gt;&lt;p&gt;[% PROCESS &quot;my/${tab.tab_name}&quot; %]&lt;/p&gt;&lt;/div&gt;
+    [% END %]
+    &lt;/div&gt;
+&lt;/div&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var tabView = new YAHOO.widget.TabView('tabbed_prefs');
+&lt;/script&gt;
+
+[% IF c.session.my_pref_came_from %]
+&lt;p&gt;
+&lt;a href=&quot;[% c.session.my_pref_came_from %]&quot;&gt;[%l('Return to the forum')%]&lt;/a&gt;
+&lt;/p&gt;
+[% ELSE %]
+&lt;p&gt;&nbsp;&lt;/p&gt;
+[% END %]

Added: trunk/root/skin2/my/selectplace_ajaxresult
===================================================================
--- trunk/root/skin2/my/selectplace_ajaxresult	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/my/selectplace_ajaxresult	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,5 @@
+&lt;select id=&quot;[% select.id %]&quot; name=&quot;[% select.id %]&quot;&gt;
+  [% FOREACH item=select.items %]
+  &lt;option value=&quot;[% item %]&quot;&gt;[% item %]&lt;/option&gt;
+  [% END %]
+&lt;/select&gt;

Added: trunk/root/skin2/my/tab_avatar
===================================================================
--- trunk/root/skin2/my/tab_avatar	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/my/tab_avatar	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,25 @@
+&lt;!-- preferences : tab_you --&gt;
+&lt;form action=&quot;my/preferences/update&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
+    &lt;input type=&quot;hidden&quot; name=&quot;form_name&quot; value=&quot;user_avatar&quot;&gt;
+
+    &lt;div style=&quot;background-color:#ccc;margin-top:5px;margin-bottom:5px;&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+
+
+    &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            [% INCLUDE shared/user_avatar person=authed_user %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;div&gt;
+                [%l('CHANGE AVATAR')%]:
+            &lt;/div&gt;
+            &lt;div class=&quot;top_padded&quot;&gt;
+                &lt;input type=&quot;file&quot; id=&quot;avatar_file&quot; name=&quot;avatar_file&quot; /&gt;
+                &lt;input type=&quot;submit&quot; value=&quot;[%l('Upload')%]&quot;&quot;/&gt;
+            &lt;/div&gt;
+        &lt;/div&gt;
+    &lt;/div&gt;
+&lt;/form&gt;
+&lt;!-- (end) preferences : tab_you --&gt;

Added: trunk/root/skin2/my/tab_notifications
===================================================================
--- trunk/root/skin2/my/tab_notifications	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/my/tab_notifications	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,39 @@
+&lt;!-- preferences : notification tab --&gt;
+&lt;form action=&quot;my/preferences/update&quot; method=&quot;POST&quot; name=&quot;notifications&quot;&gt;
+    &lt;input type=&quot;hidden&quot; name=&quot;form_name&quot; value=&quot;notifications&quot;&gt;
+
+    &lt;div style=&quot;background-color:#ccc;margin-top:5px;margin-bottom:5px;&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+
+
+    &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;input type=&quot;checkbox&quot; name=&quot;watch_on_post&quot; value=&quot;1&quot; [% IF authed_user.preference.watch_on_post %]checked=&quot;checked&quot; [% END %] /&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+            [%l('PREFS ADD WATCHES')%] 
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;input type=&quot;checkbox&quot; name=&quot;notify_thread_watch&quot; value=&quot;1&quot; [% IF authed_user.preference.notify_thread_watch %]checked=&quot;checked&quot; [% END %] /&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+            [%l('PREFS EMAIL NOTIFICATION')%] 
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;submit&quot; value=&quot;[%l('Update')%]&quot; name=&quot;update&quot; class=&quot;input_button&quot; /&gt;
+        &lt;/div&gt;
+    &lt;/div&gt;
+&lt;/form&gt;
+&lt;!-- (end) preferences : notification tab --&gt;

Added: trunk/root/skin2/my/tab_time
===================================================================
--- trunk/root/skin2/my/tab_time	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/my/tab_time	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,106 @@
+&lt;!-- preferences : time tab --&gt;
+
+    &lt;div style=&quot;background-color:#ccc;margin-top:5px;margin-bottom:5px;&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+&lt;div class=&quot;top_padded&quot;&gt;
+    [%l('PREFS DESIRED LOCATION')%]
+&lt;/div&gt;
+
+    &lt;div style=&quot;background-color:#ccc;margin-top:5px;margin-bottom:5px;&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+
+&lt;form action=&quot;my/preferences/update&quot; method=&quot;POST&quot; name=&quot;time_format&quot;&gt;
+    &lt;input type=&quot;hidden&quot; name=&quot;form_name&quot; value=&quot;time_format&quot;&gt;
+
+    [% IF tz_message %]
+    &lt;!-- Message to user --&gt;
+    &lt;div&gt;
+        &lt;b&gt;&lt;i&gt;[% tz_message %]&lt;/i&gt;&lt;/b&gt;
+    &lt;/div&gt;
+    [% END %]
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;select id=&quot;selectZone&quot; name=&quot;selectZone&quot;&gt;
+                &lt;option value=&quot;&quot;&gt;[ [%l('Select Zone')%] ]&lt;/option&gt;
+                [% FOREACH item=tz_categories %]
+                &lt;option value=&quot;[% item %]&quot;&gt;[% item %]&lt;/option&gt;
+                [% END %]
+            &lt;/select&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u align_right&quot;&gt;
+            &lt;label for=&quot;use_utc&quot;&gt;[%l('Use UTC')%]&lt;/label&gt;
+            &lt;input type=&quot;checkbox&quot; id=&quot;use_utc&quot; name=&quot;use_utc&quot; value=&quot;1&quot; onChange=&quot;toggle_timezone_menus(this)&quot;/&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u align_right&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;select id=&quot;time_format&quot; name=&quot;time_format&quot; style=&quot;text-align: center;&quot;&gt;
+                &lt;option value=&quot;&quot;&gt;([%l('Default')%])&lt;/option&gt;
+                [% WHILE (tf = time_formats.next) %]
+                &lt;option value=&quot;[% tf.id %]&quot;&gt;[% tf.sample %]&lt;/option&gt;
+                [% END %]
+            &lt;/select&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u align_right&quot;&gt;
+            &lt;label for=&quot;show_tz&quot;&gt;[%l('Show timezone')%]&lt;/label&gt;
+            &lt;input type=&quot;checkbox&quot; id=&quot;show_tz&quot; name=&quot;show_tz&quot; value=&quot;1&quot; /&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u align_right&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            [%l('Time formatting example')%]:
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u align_right&quot;&gt;
+            &lt;i&gt;[% nicedate(current_time) %]&lt;/i&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u align_right&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div style=&quot;background-color:#ccc;margin-top:5px;margin-bottom:5px;&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;submit&quot; value=&quot;[%l('Update')%]&quot; name=&quot;update&quot; class=&quot;input_button&quot; /&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u align_right&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+&lt;/form&gt;
+
+&lt;script language=&quot;JavaScript&quot; type=&quot;text/javascript&quot;&gt;
+&lt;!-- Begin
+
+    function toggle_timezone_menus(checkbox) {
+        var zone_menu   = document.getElementById('selectZone');
+        //var place_menu  = document.getElementById('selectPlace');
+
+        zone_menu.disabled  = checkbox.checked;
+        //place_menu.disabled = checkbox.checked;
+    }
+
+    // we want to make sure the menus are disabled if they need to be
+    var use_utc_cbox = document.getElementById('use_utc');
+    toggle_timezone_menus(use_utc_cbox);
+    
+// End --&gt;
+&lt;/script&gt;
+&lt;!-- (end) preferences : time tab --&gt;

Added: trunk/root/skin2/my/tab_watch
===================================================================
--- trunk/root/skin2/my/tab_watch	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/my/tab_watch	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,56 @@
+[% IF thread_watches &gt; 0 %]
+    &lt;table class=&quot;thread_watches&quot;&gt;
+        &lt;tbody&gt;
+            &lt;tr&gt;
+                &lt;th style=&quot;width:14px;&quot;&gt;&nbsp;&lt;/th&gt;
+                &lt;th&gt;[%l('Subject')%]&lt;/th&gt;
+                &lt;th&gt;[%l('Last Modified')%]&lt;/th&gt;
+                &lt;th&gt;[%l('Last Viewed')%]&lt;/th&gt;
+            [% WHILE (watch = thread_watches.next) %]
+            [% thread = watch.thread %]
+            &lt;tr&gt;
+                &lt;td style=&quot;width:14px;&quot;&gt;
+                    [% IF (thread.last_post.created &gt; watch.timestamp) %]
+                    &lt;img src=&quot;static/images/unread_posts.gif&quot; width=&quot;12&quot; height=&quot;12&quot; alt=&quot;[%l('Unread posts')%]&quot; title=&quot;[%l('Unread posts')%]&quot; /&gt;
+                    [% ELSE %]
+                    &nbsp;
+                    [% END %]
+                &lt;/td&gt;
+                &lt;td style=&quot;vertical-align: top;&quot;&gt;
+                    &lt;a href=&quot;thread/view?thread=[% thread.id %]&quot;&gt;
+                    [% ForumCode.escape(watch.thread.subject) %]
+                    &lt;/a&gt;
+                    &lt;br /&gt;
+                    &lt;span class=&quot;forum_mini_pager&quot;&gt;
+                        [%- IF authed_user || mini_pager %]
+                        [
+                            [%- IF authed_user %]
+                            &lt;a href=&quot;thread/next_post?thread=[% thread.id %]&quot;&gt;[%l('Continue')%]&lt;/a&gt;
+                            [%- END %]
+                        ]
+                        [%- END %]
+                    &lt;/span&gt;
+                &lt;/td&gt;
+
+                &lt;td style=&quot;vertical-align: top;&quot;&gt;
+                    [% nicedate(thread.last_post.created) %]
+                    &lt;br /&gt;
+                    &lt;span class=&quot;topic_creator&quot;[%l('last post by')%]&gt;
+                    &lt;span class=&quot;post_creator&quot;&gt;[% thread.last_post.creator.forum_name %]&lt;/span&gt;
+                    &lt;/span&gt;
+                &lt;/td&gt;
+
+                &lt;td style=&quot;vertical-align: top;&quot;&gt;
+                    [% nicedate(watch.timestamp) %]
+                    &lt;br /&gt;
+                    [% IF (thread.last_post.created &gt; watch.timestamp) %]
+                    &lt;span class=&quot;topic_creator&quot;&gt;[%l('Unread posts')%]&lt;/span&gt;
+                    [% END %]
+                &lt;/td&gt;
+            &lt;/tr&gt;
+            [% END %]
+        &lt;/tbody&gt;
+    &lt;/table&gt;
+[% ELSE %]
+    &lt;p&gt;[%l('You are not watching any threads')%]&lt;/p&gt;
+[% END %]

Added: trunk/root/skin2/my/tab_you
===================================================================
--- trunk/root/skin2/my/tab_you	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/my/tab_you	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,98 @@
+&lt;!-- preferences : tab_you --&gt;
+&lt;div class=&quot;yui-gd top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+    &lt;div id=&quot;result&quot; class=&quot;yui-u&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+&lt;div class=&quot;yui-gd top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        [%l('First Name')%]:
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &lt;span id=&quot;FirstName&quot; name=&quot;First name&quot; class=&quot;editable&quot;&gt;[%authed_user.first_name%]&lt;/span&gt;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+&lt;div class=&quot;yui-gd top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        [%l('Last Name')%]:
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &lt;span id=&quot;LastName&quot; class=&quot;editable&quot;&gt;[% authed_user.last_name %]&lt;/span&gt;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+&lt;div class=&quot;yui-gd top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        [%l('Forum Name')%]:
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &lt;span id=&quot;ForumName&quot; class=&quot;editable&quot;&gt;[% authed_user.forum_name %]&lt;/span&gt;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+&lt;div class=&quot;yui-gd top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        [%l('Email Address')%]:
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &lt;span id=&quot;EmailAddress&quot; name=&quot;EmailAddress&quot;&gt;[% authed_user.email %]&lt;/span&gt;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.request.base%]/static/Editable-min.js&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var E  = new YAHOO.widget.EditableElement;
+
+    E.callback = function(){
+        var handleSuccess = function(o) {
+            YAHOO.parley.small_loading.wait.hide();
+            var data = eval('(' + o.responseText + ')');
+            // show the status message
+            o.argument.msg_node.innerHTML = data.message;
+            // if we didn't update reset the field value
+            if (data.updated != 1) {
+                o.argument.node.innerHTML = data.old_value;
+            }
+        };
+        var handleFailure =  function(o) {
+            YAHOO.parley.small_loading.wait.hide();
+            alert('ERROR: ' + o.responseText);
+        };
+
+        YAHOO.parley.small_loading.wait.show();
+
+        // where to post to
+        var sUrl = '[%base%]my/saveHandler';
+
+        // postdata is a query string ... how irksome!!
+        var postData =
+               'value='     + this.contents_new
+            + '&amp;ovalue='    + this.contents
+            + '&amp;fieldname=' + this.clicked.id
+        ;
+
+        var msg_node = YAHOO.util.Dom.get('result');
+
+        var request = YAHOO.util.Connect.asyncRequest(
+            'POST',
+            sUrl,
+            {
+                success:  handleSuccess,
+                failure:  handleFailure,
+                argument: {
+                    node:     this.clicked,
+                    msg_node: msg_node
+                }
+            },
+            postData
+        );
+    };
+
+    E.init();
+&lt;/script&gt;
+&lt;!-- (end) preferences : tab_you --&gt;

Added: trunk/root/skin2/post/edit
===================================================================
--- trunk/root/skin2/post/edit	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/post/edit	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,69 @@
+&lt;div style=&quot;margin-top:10px;&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;thread_header&quot;&gt;
+    &lt;a href=&quot;forum/view?forum=[% current_forum.id %]&quot;&gt;[% current_forum.name %]&lt;/a&gt;
+    &nbsp;:&nbsp;
+    [%l('Edit')%]
+    &nbsp;:&nbsp;
+    [% ForumCode.escape(current_post.thread.subject) %]
+&lt;/div&gt;
+&lt;div style=&quot;margin-top:10px;&quot;&gt;&lt;/div&gt;
+
+[% IF messages %]
+&lt;p&gt;
+    &lt;ul&gt;
+        [% FOREACH message IN messages %]
+            &lt;li&gt;[% message %]&lt;/li&gt;
+        [% END %]
+    &lt;/ul&gt;
+&lt;/p&gt;
+[% END %]
+
+[% IF authed_user.id != current_post.creator_id %]
+Editing [% current_post.creator.forum_name %]'s post
+[% END %]
+
+&lt;form action=&quot;post/edit?post=[% current_post.id %]&quot; method=&quot;POST&quot; name=&quot;new_thread&quot;&gt;
+    &lt;table&gt;
+        &lt;tbody&gt;
+            &lt;tr&gt;
+                &lt;td class=&quot;thread_add_message&quot;&gt; [%l('Message')%] &lt;/td&gt;
+                &lt;td&gt;
+                    &lt;textarea id=&quot;thread_message&quot; name=&quot;post_message&quot; cols=&quot;60&quot; rows=&quot;10&quot; class=&quot;post_message&quot; /&gt;[% current_post.message %]&lt;/textarea&gt;
+                &lt;/td&gt;
+            &lt;/tr&gt;
+
+            [% IF authed_user.id != current_post.creator_id %]
+            &lt;tr&gt;
+                &lt;td&gt;&nbsp;&lt;/td&gt;
+                &lt;td&gt;
+                    &lt;input type=&quot;checkbox&quot; name=&quot;lock_post&quot; id=&quot;lock_post&quot; value=&quot;1&quot; /&gt;
+                    &lt;label for=&quot;lock_post&quot;&gt;
+                        [%l('ADMIN LOCK POST')%]
+                    &lt;/label&gt;
+                &lt;/td&gt;
+            &lt;/tr&gt;
+            [% END %]
+
+            &lt;tr&gt;
+                &lt;td&gt;&nbsp;&lt;/td&gt;
+                &lt;td style=&quot;text-align: center;&quot;&gt;
+                    &lt;input type=&quot;button&quot; value=&quot;[%l('Preview')%]&quot; name=&quot;post_reply&quot; class=&quot;&quot; id=&quot;message_preview&quot; /&gt;
+                    &lt;input type=&quot;submit&quot; value=&quot;[%l('Update Reply')%]&quot; name=&quot;post_update&quot;    class=&quot;input_button&quot; /&gt;
+                &lt;/td&gt;
+            &lt;/tr&gt;
+        &lt;/tbody&gt;
+    &lt;/table&gt;
+&lt;/form&gt;
+
+&lt;!-- message preview majick --&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/MessagePreview-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var MessagePreview = new ParleyMessagePreview();
+
+    MessagePreview.config.label_preview = '[%l('Preview')%]';
+    MessagePreview.config.label_edit    = '[%l('Edit')%]';
+    MessagePreview.config.post_url      = &quot;[%c.uri_for('/forumcode/preview')%]&quot;;
+
+    MessagePreview.init();
+&lt;/script&gt;
+&lt;!-- (end) message preview majick --&gt;

Added: trunk/root/skin2/search/forum
===================================================================
--- trunk/root/skin2/search/forum	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/search/forum	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,17 @@
+&lt;h1&gt;[%l('Search Results')%]&lt;/h1&gt;
+
+&lt;h2&gt;[%l('Searching for')%] &lt;em&gt;[% search_terms.raw || '[nothing]' %]&lt;/em&gt; in &lt;em&gt;[% search_forum.name || 'all forums' %]&lt;/em&gt;&lt;/h2&gt;
+
+[% IF search_results %]
+    &lt;table class=&quot;search_results&quot;&gt;
+        &lt;tbody&gt;
+            [% dummy_value = search_results.reset %]
+            [%- WHILE (post = search_results.next) %]
+            [% thread = post.thread %]
+            [% PROCESS shared/postinfo_table_row show_search_data=post %]
+            [% END %]
+        &lt;/tbody&gt;
+    &lt;/table&gt;
+[% ELSE %]
+[%l('No results found matching specified terms')%].
+[% END %]

Added: trunk/root/skin2/shared/ajax_dialog
===================================================================
--- trunk/root/skin2/shared/ajax_dialog	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/ajax_dialog	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,6 @@
+&lt;div id=&quot;ajax_dialog&quot;&gt;
+    &lt;div class=&quot;hd&quot;&gt;AJAX Message Dialog&lt;/div&gt;
+    &lt;div class=&quot;bd&quot;&gt;
+        Message
+    &lt;/div&gt;
+&lt;/div&gt;

Added: trunk/root/skin2/shared/autocomplete_style
===================================================================

Added: trunk/root/skin2/shared/focus_username_js
===================================================================
--- trunk/root/skin2/shared/focus_username_js	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/focus_username_js	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,27 @@
+&lt;!-- we don't easy have access to the body tag, so we have to put it after the form
+so that the form exists when we try to set focus --&gt;
+&lt;!--
+	MAKE SURE THE FORM HAS A NAME IF YOU WANT THIS TO WORK
+--&gt;
+&lt;script language=&quot;JavaScript&quot;&gt;
+	&lt;!-- Begin
+	function usernameFocus() {
+		// if we have any forms (we should)
+		if (document.forms.length &gt; 0) {
+			// loop through all forms on the page
+			for (i=0; i&lt;document.forms.length; i++) {
+				// store the form name
+				name = document.forms[i].name;
+				// if the form has a username field
+				if (document.forms[name].username) {
+					// give it focus and don't check any more forms
+					document.forms[name].elements['username'].focus();
+					break;
+				}
+			}
+		}
+	}
+	// End --&gt;
+
+	usernameFocus();
+&lt;/script&gt;

Added: trunk/root/skin2/shared/language_dialog
===================================================================
--- trunk/root/skin2/shared/language_dialog	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/language_dialog	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,94 @@
+&lt;!-- LANGUAGE DIALOG --&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+YAHOO.namespace(&quot;parley.language&quot;);
+
+function language_dialog_init() {
+	// Define various event handlers for Dialog
+	var handleSubmit = function() {
+		this.submit();
+	};
+	var handleCancel = function() {
+		this.cancel();
+	};
+	var handleSuccess = function(o) {
+	};
+	var handleFailure = function(o) {
+		alert(&quot;Submission failed: &quot; + o.status);
+	};
+
+	// Instantiate the Dialog
+	YAHOO.parley.language.language_dialog = new YAHOO.widget.Dialog(
+        'language_dialog', 
+        {
+            postmethod:             'form',
+            fixedcenter:            true,
+            visible:                false, 
+            modal:                  false,
+            constraintoviewport:    true,
+            width:                  '250px',
+            buttons : [
+                { text:'[%l('Cancel')%]', handler:handleCancel }
+            ]
+        }
+    );
+	
+	// Validate the entries in the form to require that both first and last name are entered
+	YAHOO.parley.language.language_dialog.validate = function() {
+		var data = this.getData();
+		if (data.username == &quot;&quot; || data.password == &quot;&quot;) {
+			alert(&quot;[%l('Please enter your username and password')%].&quot;);
+			return false;
+		}
+        else {
+			return true;
+		}
+	};
+
+	// Wire up the success and failure handlers
+	YAHOO.parley.language.language_dialog.callback = {
+        success: handleSubmit,
+        failure: handleFailure
+    };
+	
+	// Render the Dialog
+	YAHOO.parley.language.language_dialog.render();
+	//YAHOO.parley.language.language_dialog.show();
+}
+
+YAHOO.util.Event.onDOMReady(language_dialog_init);
+&lt;/script&gt;
+
+[% lang_data = [
+    {
+        code    =&gt; 'gb',
+        name    =&gt; 'English',
+    },
+    {
+        code    =&gt; 'it',
+        name    =&gt; 'Italiano',
+    },
+    {
+        code    =&gt; 'nl',
+        name    =&gt; 'Nederlands',
+    },
+   ]
+%]
+
+&lt;div id=&quot;language_dialog&quot;&gt;
+    &lt;div class=&quot;hd&quot;&gt;
+        [%l('Please choose a language')%]
+    &lt;/div&gt;
+    &lt;div class=&quot;bd&quot;&gt;
+        [% FOR lang IN lang_data %]
+        &lt;div style=&quot;float:left;width:110px;&quot;&gt;
+        &lt;a href=&quot;[% c.uri_for('/') %]?lang=[%lang.code%]&quot; style=&quot;margin-left:15px;&quot;&gt;
+            &lt;img src=&quot;/static/images/icons/flags/[%lang.code%].png&quot; width=&quot;16&quot; height=&quot;11&quot; alt=&quot;[%lang.name%]&quot; /&gt;
+            [%lang.name%]
+        &lt;/a&gt;
+        &lt;/div&gt;
+        [% END %]
+
+        &lt;div style=&quot;margin-top:10px;clear:both;&quot;&gt;&lt;/div&gt;
+    &lt;/div&gt;
+&lt;/div&gt;
+&lt;!-- (end) LANGUAGE DIALOG --&gt;

Added: trunk/root/skin2/shared/loading_please_wait
===================================================================
--- trunk/root/skin2/shared/loading_please_wait	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/loading_please_wait	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,35 @@
+&lt;!-- shared/loading_please_wait --&gt;
+&lt;div id=&quot;loading&quot;&gt;&lt;/div&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    YAHOO.namespace(&quot;parley.loading&quot;);
+
+    function loading_init() {
+        var content = document.getElementById(&quot;loading&quot;);
+        content.innerHTML = &quot;&quot;;
+
+        if (!YAHOO.parley.loading.wait) {
+            // Initialize the temporary Panel to display while waiting for external content to load
+            YAHOO.parley.loading.wait = 
+                new YAHOO.widget.Panel(
+                    &quot;wait&quot;,  
+                    {
+                        width:          &quot;240px&quot;, 
+                        fixedcenter:    true, 
+                        close:          false, 
+                        draggable:      false, 
+                        modal:          true,
+                        zindex:         4,
+                        visible:        false
+                    } 
+                )
+            ;
+    
+            YAHOO.parley.loading.wait.setHeader(&quot;[%l('Loading, please wait')%]...&quot;);
+            YAHOO.parley.loading.wait.setBody(&quot;&lt;img src=\&quot;static/images/rel_interstitial_loading.gif\&quot;/&gt;&quot;);
+            YAHOO.parley.loading.wait.render(document.body);
+        }
+    }
+
+    loading_init();
+&lt;/script&gt;
+&lt;!-- (end) shared/loading_please_wait --&gt;

Added: trunk/root/skin2/shared/login_dialog
===================================================================
--- trunk/root/skin2/shared/login_dialog	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/login_dialog	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,83 @@
+&lt;!-- LOGIN DIALOG --&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+YAHOO.namespace(&quot;parley.login&quot;);
+
+function login_dialog_init() {
+	// Define various event handlers for Dialog
+	var handleSubmit = function() {
+		this.submit();
+	};
+	var handleCancel = function() {
+		this.cancel();
+	};
+	var handleSuccess = function(o) {
+	};
+	var handleFailure = function(o) {
+		alert(&quot;Submission failed: &quot; + o.status);
+	};
+
+	// Instantiate the Dialog
+	YAHOO.parley.login.login_dialog = new YAHOO.widget.Dialog(
+        'login_dialog', 
+        {
+            postmethod:             'form',
+            fixedcenter:            true,
+            visible:                false, 
+            modal:                  false,
+            constraintoviewport:    true,
+            width:                  '450px',
+            buttons : [
+                { text:'[%l('Login')%]',  handler:handleSubmit, isDefault:true },
+                { text:'[%l('Cancel')%]', handler:handleCancel }
+            ]
+        }
+    );
+	
+	// Validate the entries in the form to require that both first and last name are entered
+	YAHOO.parley.login.login_dialog.validate = function() {
+		var data = this.getData();
+		if (data.username == &quot;&quot; || data.password == &quot;&quot;) {
+			alert(&quot;[%l('Please enter your username and password')%].&quot;);
+			return false;
+		}
+        else {
+			return true;
+		}
+	};
+
+	// Wire up the success and failure handlers
+	YAHOO.parley.login.login_dialog.callback = {
+        success: handleSubmit,
+        failure: handleFailure
+    };
+	
+	// Render the Dialog
+	YAHOO.parley.login.login_dialog.render();
+	//YAHOO.parley.search.search_dialog.show();
+}
+
+YAHOO.util.Event.onDOMReady(login_dialog_init);
+&lt;/script&gt;
+
+&lt;div id=&quot;login_dialog&quot; style=&quot;visibility:hidden;&quot;&gt;
+    &lt;div class=&quot;hd&quot;&gt;
+        [%l('Please enter your information')%]
+    &lt;/div&gt;
+    &lt;div class=&quot;bd&quot;&gt;
+        &lt;form action=&quot;user/login&quot; method=&quot;post&quot; name=&quot;login_form&quot;
+            class=&quot;login_dialog_form_&quot;&gt;
+            &lt;fieldset&gt;
+                &lt;label for=&quot;username&quot;&gt;&lt;b&gt;[%l('Username')%]:&lt;/b&gt;&lt;/label&gt;
+                &lt;input type=&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot; style=&quot;width: 16em;&quot; class=&quot;input_text&quot; /&gt;
+                &lt;br /&gt;
+                &lt;label for=&quot;password&quot;&gt;&lt;b&gt;[%l('Password')%]:&lt;/b&gt;&lt;/label&gt;
+                &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; style=&quot;width: 15em;&quot; class=&quot;input_text&quot; /&gt;
+
+                &lt;p align=&quot;right&quot;&gt;
+                &lt;a href=&quot;user/password/forgotten&quot;&gt;[%l('Forgotten Password')%]&lt;/a&gt;
+                &lt;/p&gt;
+            &lt;/fieldset&gt;
+        &lt;/form&gt;
+    &lt;/div&gt;
+&lt;/div&gt;
+&lt;!-- LOGIN DIALOG --&gt;

Added: trunk/root/skin2/shared/moderator_list
===================================================================
--- trunk/root/skin2/shared/moderator_list	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/moderator_list	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,12 @@
+[% IF current_forum %]
+    &lt;div class=&quot;moderator_list&quot;&gt;
+        &lt;strong&gt;[%l('Forum Moderators')%]:&lt;/strong&gt;
+        [% IF current_forum.moderators.size &gt; 0 %]
+            [% FOR m IN current_forum.moderators %]
+            &lt;a href=&quot;user/profile?user=[%m.id%]&quot;&gt;[% m.forum_name %]&lt;/a&gt;[% UNLESS loop.last() %], [% END %]
+            [% END %]
+        [% ELSE %]
+            &lt;em&gt;[%l('None')%]&lt;/em&gt;
+        [% END %]
+    &lt;/div&gt;
+[% END %]

Added: trunk/root/skin2/shared/navigation
===================================================================
--- trunk/root/skin2/shared/navigation	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/navigation	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,5 @@
+&lt;!-- shared/navigation --&gt;
+&lt;p&gt;
+    [% PROCESS shared/threadcrumbs %]
+&lt;p&gt;
+&lt;!-- end : shared/navigation --&gt;

Added: trunk/root/skin2/shared/pager_advanced
===================================================================
--- trunk/root/skin2/shared/pager_advanced	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/pager_advanced	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,60 @@
+[% IF page %]
+&lt;div class=&quot;pager_advanced&quot;&gt;
+    [% curr_path = '/' _ c.req.path %]
+    [% IF current_thread %]
+    [% extra_url_args = { 'thread' =&gt; current_thread.id } %]
+    [% ELSIF current_forum %]
+    [% extra_url_args = { 'forum' =&gt; current_forum.id } %]
+    [% ELSE %]
+    [% extra_url_args = { } %]
+    [% END %]
+
+    [%l('Page [_1] of [_2]', [page.current_page, page.last_page])%]
+    [% IF page.last_page &gt; 1 %]
+    [
+        [% UNLESS page.current_page == page.first_page %]
+        [% url_args = { 'page' =&gt; page.first_page } %]
+        [% url_args.import(extra_url_args) %]
+        &lt;a href=&quot;[%c.uri_for(curr_path,url_args)%]&quot;&gt;[%l('First')%]&lt;/a&gt;
+        |
+        [% END %]
+
+        [% IF page.previous_page %]
+        [% url_args = { 'page' =&gt; page.previous_page } %]
+        [% url_args.import(extra_url_args) %]
+        &lt;a href=&quot;[%c.uri_for(curr_path,url_args)%]&quot;&gt;[%l('Previous')%]&lt;/a&gt;
+        |
+        [% END %]
+
+        [%# pagination majick! %]
+        [% FOREACH jiffy = page_range_spread %]
+            [% IF jiffy %]
+                [% IF page.current_page == jiffy %]
+                &lt;b&gt;[% jiffy %]&lt;/b&gt;
+                [% ELSE %]
+                [% url_args = { 'page' =&gt; jiffy } %]
+                [% url_args.import(extra_url_args) %]
+                &lt;a href=&quot;[%c.uri_for(curr_path,url_args)%]&quot;&gt;[%jiffy%]&lt;/a&gt;
+                [% END %]
+            [% ELSE %]
+                ...
+            [% END %]
+        [% END %]
+
+        [% IF page.next_page %]
+        |
+        [% url_args = { 'page' =&gt; page.next_page } %]
+        [% url_args.import(extra_url_args) %]
+        &lt;a href=&quot;[%c.uri_for(curr_path,url_args)%]&quot;&gt;[%l('Next')%]&lt;/a&gt;
+        [% END %]
+
+        [% UNLESS page.current_page == page.last_page %]
+        |
+        [% url_args = { 'page' =&gt; page.last_page } %]
+        [% url_args.import(extra_url_args) %]
+        &lt;a href=&quot;[%c.uri_for(curr_path,url_args)%]&quot;&gt;[%l('Last')%]&lt;/a&gt;
+        [% END %]
+    ]
+    [% END %]
+&lt;/div&gt;
+[% END %]

Added: trunk/root/skin2/shared/postinfo_table_row
===================================================================
--- trunk/root/skin2/shared/postinfo_table_row	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/postinfo_table_row	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,78 @@
+&lt;!-- post-info table row --&gt;
+[% toggler = (1 - (toggler||0)) %]
+&lt;tr class=&quot;row [% row_styles.$toggler %]&quot;&gt;
+    &lt;td width=&quot;36&quot; style=&quot;padding-top:5px;&quot;&gt;
+        &lt;!-- interesting things about the thread; sticky, locked, etc --&gt;
+        [%- IF thread.sticky %]
+        &lt;img src=&quot;static/images/icons/attach.png&quot; alt=&quot;Sticky&quot; title=&quot;Sticky Topic&quot; width=&quot;16&quot; height=&quot;16&quot; /&gt;
+        [%- END %]
+        [%- IF thread.locked %]
+        &lt;img src=&quot;static/images/icons/lock.png&quot; alt=&quot;Locked&quot; title=&quot;Locked Topic&quot; width=&quot;16&quot; height=&quot;16&quot; /&gt;
+        [%- END %]
+    &lt;/td&gt;
+
+    &lt;td&gt;
+        &lt;div class=&quot;thread_subject&quot;&gt;
+            &lt;a href=&quot;[%c.uri_for('/thread/view',{'thread'=&gt;thread.id})%]&quot; class=&quot;topic_link&quot;&gt;[% ForumCode.escape(thread.subject) |truncate(55) %]&lt;/a&gt;
+        &lt;/div&gt;
+        [%- IF show_forum_name %]
+        &lt;div class=&quot;thread_recent_forum&quot;&gt;
+            &lt;a href=&quot;[%c.uri_for('/forum/view',{'forum'=&gt;thread.forum.id})%]&quot;&gt;[% thread.forum.name %]&lt;/a&gt;
+        &lt;/div&gt;
+        [% END %]
+        &lt;div class=&quot;forum_mini_pager&quot;&gt;
+            [%- IF authed_user || mini_pager %]
+            [
+                [%- IF authed_user %]
+                &lt;a href=&quot;[%c.uri_for('/thread/next_post',{'thread'=&gt;thread.id})%]&quot;&gt;Continue&lt;/a&gt;
+                [%- END %]
+            ]
+            [%- END %]
+        &lt;/div&gt;
+    &lt;/td&gt;
+
+    [% IF (search_post = show_search_data) %]
+    &lt;td style=&quot;&quot;&gt;
+        &lt;div class=&quot;search_match_context&quot;&gt;
+            [% context = search_post.match_context(search_terms.raw) %]
+            [% context %]
+        &lt;/div&gt;
+        &lt;div class=&quot;forum_mini_pager&quot;&gt;
+            [
+            &lt;a href=&quot;[%c.uri_for('/post/view',{'post'=&gt;search_post.id})%]&quot;&gt;Go to post&lt;/a&gt;
+            ]
+        &lt;/div&gt;
+    &lt;/td&gt;
+    [% END %]
+
+    &lt;td class=&quot;info_column&quot;&gt;
+        &lt;div class=&quot;topic_creator&quot;&gt;
+            [% l('last post by ([_1])', thread.last_post.creator.forum_name) %]
+        &lt;/div&gt;
+        &lt;div class=&quot;thread_lastpost&quot;&gt;
+            [% thread.last_post.interval_ago %]
+            [%l('ago')%]
+        &lt;/div&gt;
+    &lt;/td&gt;
+
+    &lt;td class=&quot;info_column&quot;&gt;
+        &lt;div class=&quot;topic_creator&quot;&gt;
+            [% l('created by ([_1])', thread.creator.forum_name) %]
+        &lt;/div&gt;
+        &lt;div class=&quot;thread_lastpost&quot;&gt;
+            [% nicedate(thread.created) %]
+        &lt;/div&gt;
+    &lt;/td&gt;
+
+    &lt;td class=&quot;info_column_counts&quot;&gt;
+        &lt;div class=&quot;forum_postcount&quot;&gt;
+            [%# number of replies is one less than the number of posts %]
+            [% SET tpc = (thread.post_count - 1) %]
+            [%l('[quant,_1,reply]',tpc)%]
+        &lt;/div&gt;
+        &lt;div class=&quot;forum_postcount&quot;&gt;
+            [%l('[quant,_1,view]',thread.post_count)%]
+        &lt;/div&gt;
+    &lt;/td&gt;
+&lt;/tr&gt;
+&lt;!-- (end) post-info table row --&gt;

Added: trunk/root/skin2/shared/search_dialog
===================================================================
--- trunk/root/skin2/shared/search_dialog	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/search_dialog	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,88 @@
+&lt;!-- SEARCH DIALOG --&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+YAHOO.namespace(&quot;parley.search&quot;);
+
+function search_dialog_init() {
+	// Define various event handlers for Dialog
+	var handleSubmit = function() {
+		this.submit();
+	};
+	var handleCancel = function() {
+		this.cancel();
+	};
+	var handleSuccess = function(o) {
+	};
+	var handleFailure = function(o) {
+		alert(&quot;Submission failed: &quot; + o.status);
+	};
+
+	// Instantiate the Dialog
+	YAHOO.parley.search.search_dialog = new YAHOO.widget.Dialog(
+        'search_dialog', 
+        {
+            postmethod : 'form',
+            fixedcenter : true,
+            visible : false, 
+            modal: false,
+            constraintoviewport : true,
+            buttons : [
+                { text:'[%l('Search')%]', handler:handleSubmit, isDefault:true },
+                { text:'[%l('Cancel')%]', handler:handleCancel }
+            ]
+        }
+    );
+	
+	// Validate the entries in the form to require that both first and last name are entered
+	YAHOO.parley.search.search_dialog.validate = function() {
+		var data = this.getData();
+		if (data.search_terms == &quot;&quot;) {
+			alert(&quot;Please enter something to search for&quot;);
+			return false;
+		} else {
+			return true;
+		}
+	};
+
+	// Wire up the success and failure handlers
+	YAHOO.parley.search.search_dialog.callback = { success: handleSubmit,
+												 failure: handleFailure };
+	
+	// Render the Dialog
+	YAHOO.parley.search.search_dialog.render();
+}
+
+YAHOO.util.Event.onDOMReady(search_dialog_init);
+&lt;/script&gt;
+
+&lt;div id=&quot;search_dialog&quot;&gt;
+&lt;div class=&quot;hd&quot;&gt;[%l('Search')%]&lt;/div&gt;
+&lt;div class=&quot;bd&quot;&gt;
+    &lt;form action=&quot;search/forum&quot; method=&quot;post&quot; name=&quot;search_form&quot; class=&quot;search_dialog_form&quot;&gt;
+        &lt;fieldset&gt;
+            &lt;label for=&quot;search_terms&quot;&gt;&lt;b&gt;[%l('Search For')%]:&lt;/b&gt;&lt;/label&gt;
+            &lt;input type=&quot;text&quot; id=&quot;search_terms&quot; name=&quot;search_terms&quot; style=&quot;width: 25em;&quot; class=&quot;input_text&quot; /&gt;
+            &lt;br /&gt;
+        &lt;/fieldset&gt;
+
+        &lt;fieldset&gt;
+            &lt;label for=&quot;search_forum&quot;&gt;&lt;em&gt;[%l('in')%]:&lt;/em&gt;&lt;/label&gt;
+            &lt;select id=&quot;search_forum&quot; name=&quot;search_forum&quot;&gt;
+                &lt;optgroup label=&quot;[%l('General')%]&quot;&gt;
+                    [% IF current_forum %]&lt;option value=&quot;[% current_forum.id %]&quot;&gt;[%l('Current Forum')%]&lt;/option&gt;[% END %]
+                    &lt;option value=&quot;&quot;&gt;[%l('All Forums')%]&lt;/option&gt;
+                &lt;/optgroup&gt;
+                [% IF available_forums %]
+                [% SET dummy=available_forums.reset %]
+                &lt;optgroup label=&quot;[%l('Forums')%]&quot;&gt;
+                [% WHILE (forum = available_forums.next) %]
+                &lt;option value=&quot;[% forum.id %]&quot;&gt;[% forum.name %]&lt;/option&gt;
+                [% END %]
+                &lt;/optgroup&gt;
+                [% END %]
+            &lt;/select&gt;
+            &lt;br /&gt;
+        &lt;/fieldset&gt;
+    &lt;/form&gt;
+&lt;/div&gt;
+&lt;/div&gt;
+&lt;!-- SEARCH DIALOG --&gt;

Added: trunk/root/skin2/shared/small_loading_please_wait
===================================================================
--- trunk/root/skin2/shared/small_loading_please_wait	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/small_loading_please_wait	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,37 @@
+&lt;!-- shared/small_loading_please_wait --&gt;
+&lt;div id=&quot;small_loading&quot;&gt;&lt;/div&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    YAHOO.namespace(&quot;parley.small_loading&quot;);
+
+    function small_loading_init() {
+        var content = document.getElementById(&quot;small_loading&quot;);
+        content.innerHTML = &quot;&quot;;
+
+        if (!YAHOO.parley.small_loading.wait) {
+            // Initialize the temporary Panel to display while waiting for external content to load
+            YAHOO.parley.small_loading.wait = 
+                new YAHOO.widget.Overlay(
+                    &quot;loader_wait&quot;,  
+                    {
+                        fixedcenter:    false, 
+                        close:          false, 
+                        draggable:      false, 
+                        zindex:         4,
+                        x: 30,
+                        y: 15,
+                        visible:        false
+                    } 
+                )
+            ;
+    
+            YAHOO.parley.small_loading.wait.setBody(
+                &quot;&lt;img src=\&quot;static/images/loader.gif\&quot;/&gt;&quot;
+            );
+            YAHOO.parley.small_loading.wait.render(document.body);
+        }
+    }
+
+    small_loading_init();
+    //YAHOO.parley.small_loading.wait.show();
+&lt;/script&gt;
+&lt;!-- (end) shared/small_loading_please_wait --&gt;

Added: trunk/root/skin2/shared/thread_watch
===================================================================
--- trunk/root/skin2/shared/thread_watch	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/thread_watch	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,17 @@
+&lt;!-- shared/thread_watch --&gt;
+[%- IF authed_user %]
+&lt;div class=&quot;thread_watch&quot;&gt;
+    &lt;strong&gt;[% watcher_count %] [% IF watcher_count == 1 %][%l('person')%][% ELSE %][%l('people')%][% END %] [%l('watching this thread')%].&lt;/strong&gt;
+    &lt;br /&gt;
+
+    [%- IF watching_thread %]
+        [%l('You are watching this thread')%].
+        (
+        &lt;a href=&quot;thread/watch?thread=[% current_thread.id %]&amp;page=[% page.current_page %]&amp;watch=0&quot;&gt;[%l('Remove Watch')%]&lt;/a&gt;
+        )
+    [%- ELSE %]
+        &lt;a href=&quot;thread/watch?thread=[% current_thread.id %]&amp;page=[% page.current_page %]&quot;&gt;[%l('Watch this thread')%]&lt;/a&gt;
+    [%- END%]
+&lt;/div&gt;
+[%- END %] [%# authed_user block %]
+&lt;!-- end : shared/thread_watch --&gt;

Added: trunk/root/skin2/shared/threadcrumbs
===================================================================
--- trunk/root/skin2/shared/threadcrumbs	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/threadcrumbs	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,9 @@
+    &lt;a href=&quot;forum/list&quot;&gt;Home&lt;/a&gt;
+    [% IF current_forum %]
+        &raquo;
+        &lt;a href=&quot;forum/view?forum=[% current_forum.id %]&quot;&gt;[% current_forum.name %]&lt;/a&gt;
+        [% IF current_thread %]
+            &raquo;
+            &lt;a href=&quot;thread/view?thread=[% current_thread.id %]&quot;&gt;[% ForumCode.escape(current_thread.subject) %]&lt;/a&gt;
+        [% END %]
+    [% END %]

Added: trunk/root/skin2/shared/useful_tt_stuff
===================================================================
--- trunk/root/skin2/shared/useful_tt_stuff	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/useful_tt_stuff	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,31 @@
+[% USE HTML %]
+[% USE ForumCode %]
+
+[% SET row_styles = ['row_odd', 'row_even'] %]
+
+[%- MACRO nicedate(d) BLOCK %]
+    [%# if a person has preferences, and there's a timezone option set, use it to
+        set the TZ used to display the time in nicedate
+    %]
+    [% IF authed_user.preference.timezone %]
+        [% CALL d.set_time_zone(authed_user.preference.timezone) %]
+    [% ELSE %]
+        [% CALL d.set_time_zone('UTC') %]
+    [% END %]
+
+    [% IF authed_user.preference.time_format %]
+        [% d.strftime(authed_user.preference.time_format.time_string) %]
+    [% ELSE %]
+        [% d.strftime('%c') %]
+    [% END %]
+
+    [% IF    authed_user.preference.show_tz
+        || ! authed_user.preference.show_tz.defined
+    %]
+        [% d.time_zone_short_name() %]
+    [% END %]
+[% END %]
+
+[% MACRO l(text, args) BLOCK;
+    c.i18nise (text, args);
+END; %]

Added: trunk/root/skin2/shared/user_avatar
===================================================================
--- trunk/root/skin2/shared/user_avatar	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/user_avatar	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,11 @@
+&lt;!-- user avatar --&gt;
+[% avatar_file = c.path_to('root') _ &quot;/static/user_file/${person.id}/avatar.jpg&quot; %]
+[% TRY %]
+    [% USE avatar = Image(avatar_file) %]
+    [% tmp = avatar.attr %]
+    &lt;img class=&quot;picborder&quot; src=&quot;/static/user_file/[% person.id %]/avatar.jpg&quot; border=&quot;0&quot; [% avatar.attr %] alt=&quot;[%l('Avatar')%]&quot; /&gt;
+    &lt;br /&gt;
+[% CATCH %]
+   [%l('No User Avatar')%] 
+[% END %]
+&lt;!-- end : user avatar --&gt;

Added: trunk/root/skin2/shared/user_status
===================================================================
--- trunk/root/skin2/shared/user_status	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/shared/user_status	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,19 @@
+&lt;!-- shared/user_status --&gt;
+&lt;p&gt;
+    [% IF (authed_user) %]
+        [%l('Logged in as')%] &lt;b&gt;[% authed_user.first_name %] [% authed_user.last_name %]&lt;/b&gt;
+        [% UNLESS authed_user.authentication.authenticated %]
+            (&lt;b&gt;&lt;i&gt;[%l('Not Authenticated')%]&lt;/i&gt;&lt;/b&gt;)
+        [% END %]
+        &lt;i&gt;&lt;br /&gt;[
+        &lt;a href=&quot;user/logout&quot;&gt;[%l('Logout')%]&lt;/a&gt;
+        ]&lt;/i&gt;
+    [% ELSE %]
+        &lt;i&gt;[
+        &lt;a href=&quot;javascript:;&quot; onclick=&quot;javascript:YAHOO.parley.login.login_dialog.show(); return false;&quot;&gt;[%l('Login')%]&lt;/a&gt;
+        |
+        &lt;a href=&quot;user/signup&quot;&gt;[%l('Signup')%]&lt;/a&gt;
+        ]&lt;/i&gt;
+    [% END %] [%# authed_user end %]
+&lt;/p&gt;
+&lt;!-- end : shared/user_status --&gt;

Added: trunk/root/skin2/site/ip_bans
===================================================================
--- trunk/root/skin2/site/ip_bans	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/site/ip_bans	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,85 @@
+&lt;h1&gt;[%l('IP Bans')%]&lt;/h1&gt;
+[% WHILE (ban_type = ip_ban_types.next) %]
+    [% role_name = 'ip_ban_' _ ban_type.name %]
+    [% has_role  = authed_user.check_any_user_role('site_moderator', role_name) %]
+    [% IF has_role %][% eclass=&quot;editable&quot; %][% ELSE %][% eclass=&quot;noneditable&quot; %][% END %]
+    [% bans      = ban_type.ip_bans_rs %]
+
+&lt;h2 class=&quot;top_padded&quot;&gt;
+    [% ban_type.description %]
+&lt;/h2&gt;
+    [% IF has_role %]
+    &lt;img src=&quot;/static/images/icons/page_edit.png&quot; width=&quot;16&quot; height=&quot;16&quot; /&gt;
+    [% ELSE %]
+    &lt;img src=&quot;/static/images/icons/lock.png&quot; width=&quot;16&quot; height=&quot;16&quot; /&gt;
+    [% END %]
+    [% IF bans.count %]
+        [% WHILE (ip_ban = bans.next) %]
+        &lt;span id=&quot;ipban_[%ip_ban.id%]&quot; class=&quot;[%eclass%]&quot;&gt;[%ip_ban.ip_range%]&lt;/span&gt;
+        [% END %]
+    [% ELSE %]
+        &lt;span id=&quot;ipbannewtype_[%ban_type.id%]&quot; class=&quot;[%eclass%]&quot;&gt;None&lt;/span&gt;
+    [% END %]
+[% END %]
+
+
+[% PROCESS shared/ajax_dialog %]
+
+
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.request.base%]/static/Editable-min.js&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var E  = new YAHOO.widget.EditableElement;
+    E.config.input_type = 'textarea';
+
+    E.callback = function(){
+        var handleSuccess = function(o) {
+            YAHOO.parley.small_loading.wait.hide();
+            var data = eval('(' + o.responseText + ')');
+            // if we didn't update reset the field value
+            if (data.updated != 1) {
+                o.argument.node.innerHTML = data.old_value;
+            }
+            if (data.error) {
+                try {
+                    YAHOO.parley.ajax_dialog.dlg.show_message( data.error );
+                } catch(e) { alert('handleSuccess: ' + e); }
+            }
+        };
+        var handleFailure =  function(o) {
+            YAHOO.parley.small_loading.wait.hide();
+            try {
+                YAHOO.parley.ajax_dialog.dlg.show_message( o );
+            } catch(e) { alert('handleFailure: ' + e); }
+        };
+
+        // let the user know something is happening
+        YAHOO.parley.small_loading.wait.show();
+
+        // where to post to
+        var sUrl = &quot;[%c.uri_for('/site/saveBanHandler')%]&quot;;
+
+        // postdata is a query string ... how irksome!!
+        var postData =
+               'value='     + this.contents_new
+            + '&amp;ovalue='    + this.contents
+            + '&amp;fieldname=' + this.clicked.id
+        ;
+
+        //var msg_node = YAHOO.util.Dom.get('result');
+
+        var request = YAHOO.util.Connect.asyncRequest(
+            'POST',
+            sUrl,
+            {
+                success:  handleSuccess,
+                failure:  handleFailure,
+                argument: {
+                    node:     this.clicked
+                }
+            },
+            postData
+        );
+    };
+
+    E.init();
+&lt;/script&gt;

Added: trunk/root/skin2/site/ip_info
===================================================================
--- trunk/root/skin2/site/ip_info	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/site/ip_info	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,25 @@
+&lt;h1&gt;[%l('IP Information')%]&lt;/h1&gt;
+
+&lt;h2&gt;[% ip_address %]&lt;/h2&gt;
+
+[% dummy_value = people_posting.reset %]
+&lt;table class=&quot;forum_list&quot;&gt;
+    &lt;thead&gt;
+        &lt;th&gt;[%l('Name')%]&lt;/td&gt;
+        &lt;th&gt;[%l('Posts Made')%]&lt;/td&gt;
+    &lt;/thead&gt;
+    &lt;tbody&gt;
+        [% WHILE (post = people_posting.next) %]
+        [% toggler = (1 - (toggler||0)) %]
+
+        &lt;tr class=&quot;row [% row_styles.$toggler %]&quot;&gt;
+            &lt;td width=&quot;50%&quot;&gt;
+                &lt;a href=&quot;[%c.uri_for('/user/profile',{'user'=&gt;post.creator.id})%]&quot;&gt;[% post.creator.forum_name %]&lt;/a&gt;
+            &lt;/td&gt;
+            &lt;td width=&quot;40%&quot;&gt;
+                [% post.creator.posts_from_ip(ip_address).count %]
+            &lt;/td&gt;
+        &lt;/tr&gt;
+        [% END %]
+    &lt;/tbody&gt;
+&lt;/table&gt;

Added: trunk/root/skin2/site/services
===================================================================
--- trunk/root/skin2/site/services	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/site/services	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,35 @@
+&lt;h1&gt;[%l('Services')%]&lt;/h1&gt;
+
+&lt;table class=&quot;service_list&quot;&gt;
+    &lt;thead&gt;
+        &lt;tr&gt;
+            &lt;th&gt;[%l('Service')%]&lt;/th&gt;
+            &lt;th&gt;[%l('Active')%]&lt;/th&gt;
+            &lt;th&gt;[%l('Comment')%]&lt;/th&gt;
+            &lt;th&gt;[%l('Start')%]/[%l('Stop')%]&lt;/th&gt;
+        &lt;/tr&gt;
+    &lt;/thead&gt;
+
+    &lt;tbody&gt;
+        &lt;tr class=&quot;row row_odd&quot;&gt;
+            &lt;td&gt;[%l('Email Engine')%]&lt;/td&gt;
+            &lt;td&gt;
+                [% IF email_engine.pid %]
+                [%l('Yes')%] 
+                [% ELSE %]
+                [%l('No')%] 
+                [% END %]
+            &lt;/td&gt;
+            &lt;td&gt;
+                [% IF email_engine.pid %]
+                pid=[%email_engine.pid%]
+                [% ELSE %]
+                &nbsp;
+                [% END %]
+            &lt;/td&gt;
+            &lt;td&gt;
+                &nbsp;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;/tbody&gt;
+&lt;/table&gt;

Added: trunk/root/skin2/site/user
===================================================================
--- trunk/root/skin2/site/user	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/site/user	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,106 @@
+&lt;h1&gt;[%l('User Roles')%]&lt;/h1&gt;
+
+&lt;h2&gt;[% person.forum_name %] ([%person.first_name%] [%person.last_name%])&lt;/h2&gt;
+
+&lt;form&gt;
+    &lt;table class=&quot;user_permission_list&quot;&gt;
+        &lt;tbody&gt;
+
+            [% WHILE (role = roles.next) %]
+            [% toggler = (1 - (toggler||0)) %]
+            &lt;tr class=&quot;row [% row_styles.$toggler %]&quot;&gt;
+                &lt;td width=&quot;25%&quot;&gt;
+                    &lt;label for=&quot;userrole_[%role.id%]&quot;&gt;
+                        [% role.description %]
+                    &lt;/label&gt;
+                &lt;/td&gt;
+                &lt;td&gt;
+                    [% has_role = person.check_user_roles(role.name) %]
+                    &lt;input type=&quot;checkbox&quot; class=&quot;role_checkbox&quot; id=&quot;userrole_[%role.id%]&quot; [%IF has_role%]checked=&quot;checked&quot;[%END%]/&gt;
+                    &lt;span id=&quot;status_[%role.id%]&quot;&gt;&lt;/span&gt;
+                &lt;/td&gt;
+            &lt;/tr&gt;
+            [% END %]
+
+        &lt;/tbody&gt;
+    &lt;/table&gt;
+&lt;/form&gt;
+
+&lt;div class=&quot;top_padded&quot;&gt;
+&lt;a href=&quot;[%c.uri_for('/site/users/')%]&quot;&gt;Back to User Management&lt;/a&gt;
+&lt;/div&gt;
+
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var YU  = YAHOO.util,
+        Dom = YAHOO.util.Dom;
+
+    var items = Dom.getElementsByClassName('role_checkbox');
+
+    update_role = function() {
+        var elID = this.id,
+            checked = (this.checked ? 1 : 0);
+        var roleID = elID.split('_')[1];
+        var statusDiv = Dom.get('status_' + roleID);
+
+        var handleSuccess = function(o) {
+            var data = eval('(' + o.responseText + ')');
+            // show the status message
+            //o.argument.msg_node.innerHTML = data.message;
+            // clear the loader-gif
+            o.argument.msg_node.innerHTML = '';
+
+            // show any returned errors
+            if (data.error) {
+                if (data.error.message!=undefined) {
+                    o.argument.msg_node.innerHTML = data.error.message;
+                }
+
+                // reset the checkbox
+                Dom.get(o.argument.cb_node).checked =
+                    (1 - o.argument.value);
+            }
+        };
+        var handleFailure = function(o) {
+            // show the status message
+            o.argument.msg_node.innerHTML = o.responseText;
+
+            // reset the checkbox
+            Dom.get(o.argument.cb_node).checked =
+                (1 - o.argument.value);
+        };
+
+        // where to post to
+        var sUrl = '[%c.uri_for('/site/roleSaveHandler')%]';
+
+        // postdata is a query string ... how irksome!!
+        var postData =
+               'person='    + [%person.id%]
+            +  '&amp;role='     + roleID
+            +  '&amp;value='    + checked
+        ;
+
+        // some visual feedback that something is happening
+        statusDiv.innerHTML = '&lt;img src=&quot;[%c.uri_for('/static/images/loader-bar.gif')%]&quot; /&gt;';
+
+        var request = YAHOO.util.Connect.asyncRequest(
+            'POST',
+            sUrl,
+            {
+                success:  handleSuccess,
+                failure:  handleFailure,
+                argument: {
+                    msg_node: statusDiv,
+                    cb_node:  elID,
+                    value:    checked
+                }
+            },
+            postData
+        );
+    };
+
+    YU.Event.addListener(
+        items,
+        'change',
+        update_role
+    );
+&lt;/script&gt;

Added: trunk/root/skin2/site/users
===================================================================
--- trunk/root/skin2/site/users	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/site/users	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,65 @@
+&lt;h1&gt;User Management&lt;/h1&gt;
+
+&lt;h2&gt;Administration Rights&lt;/h2&gt;
+
+
+&lt;form action=&quot;[%c.uri_for('/site/user/')%]&quot; onsubmit=&quot;return YAHOO.example.ACJson.validateForm();&quot;&gt;
+    &lt;div id=&quot;ysearch&quot;&gt;
+		&lt;label&gt;User Search: &lt;/label&gt;
+		&lt;input id=&quot;ysearchinput&quot; type=&quot;text&quot;&gt;
+		&lt;input id=&quot;ac_personid&quot; type=&quot;hidden&quot; value=&quot;zx&quot; name=&quot;pid&quot;&gt;
+		&lt;input id=&quot;ysearchsubmit&quot; type=&quot;submit&quot; value=&quot;Submit Query&quot;&gt;
+		&lt;div id=&quot;ysearchcontainer&quot;&gt;&lt;/div&gt;
+    &lt;/div&gt;
+&lt;/form&gt;
+
+&lt;h2&gt;Restrictions, Bans and Suspensions&lt;/h2&gt;
+
+&lt;script type=&quot;text/javascript&quot;&gt;
+YAHOO.example.ACJson = new function(){
+    // Instantiate an XHR DataSource and define schema as an array:
+    //     [&quot;Multi-depth.object.notation.to.find.a.single.result.item&quot;,
+    //     &quot;Query Key&quot;,
+    //     &quot;Additional Param Name 1&quot;,
+    //     ...
+    //     &quot;Additional Param Name n&quot;]
+    this.oACDS = new YAHOO.widget.DS_XHR(&quot;/site/users_autocomplete/&quot;, [&quot;ResultSet.person&quot;,&quot;forum_name&quot;]);
+    this.oACDS.queryMatchContains = true;
+    this.oACDS.forceSelection = true;
+    this.oACDS.typeAhead = true;
+    this.oACDS.animSpeed = 0.1;
+    //this.oACDS.scriptQueryAppend = &quot;output=json&amp;results=100&quot;; // Needed for YWS
+
+    // Instantiate AutoComplete
+    this.oAutoComp = new YAHOO.widget.AutoComplete(&quot;ysearchinput&quot;,&quot;ysearchcontainer&quot;, this.oACDS);
+    this.oAutoComp.useShadow = true;
+    this.oAutoComp.formatResult = function(oResultItem, sQuery) {
+        return oResultItem[1].forum_name
+            + &quot; (&quot;
+            + oResultItem[1].first_name
+            + &quot; &quot;
+            + oResultItem[1].last_name
+            + &quot;)&quot;;
+    };
+    this.oAutoComp.doBeforeExpandContainer = function(oTextbox, oContainer, sQuery, aResults) {
+        var pos = YAHOO.util.Dom.getXY(oTextbox);
+        pos[1] += YAHOO.util.Dom.get(oTextbox).offsetHeight + 2;
+        YAHOO.util.Dom.setXY(oContainer,pos);
+        return true;
+    };
+
+    this.oAutoComp.itemSelectEvent.subscribe(
+        function(oSelf, elItem, oData) {
+            YAHOO.util.Dom.get('ac_personid').value = elItem[2][1].id;
+        },
+        this,
+        false
+    );
+
+    // Stub for form validation
+    this.validateForm = function() {
+        // Validation code goes here
+        return true;
+    };
+};
+&lt;/script&gt;

Added: trunk/root/skin2/terms/accept
===================================================================
--- trunk/root/skin2/terms/accept	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/terms/accept	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,29 @@
+&lt;h1&gt;[%l('Terms and Conditions')%]&lt;/h1&gt;
+
+&lt;p&gt;
+[%l('ACCEPT TERMS')%]:
+&lt;/p&gt;
+
+&lt;div class=&quot;site_terms&quot;&gt;
+    [% ForumCode.forumcode(latest_terms.content) %]
+    &lt;div style=&quot;text-align: right;&quot;&gt;
+    [%l('Last Modified')%]: [% nicedate(latest_terms.created) %]
+    &lt;/div&gt;
+&lt;/div&gt;
+
+[% IF latest_terms.change_summary %]
+&lt;h1&gt;[%l('Summary of Changes')%]&lt;/h1&gt;
+&lt;div class=&quot;site_terms&quot;&gt;
+    [% ForumCode.forumcode(latest_terms.change_summary) %]
+&lt;/div&gt;
+[% END %]
+
+&lt;div class=&quot;site_terms&quot; style=&quot;border: none; text-align: center;&quot;&gt;
+    &lt;form method=&quot;post&quot; action=&quot;terms/accept&quot; /&gt;
+
+    &lt;input type=&quot;submit&quot; name=&quot;terms_accept&quot; value=&quot;[%l('TERMS AGREE')%]&quot; /&gt;
+    &lt;br /&gt;
+    &lt;input type=&quot;submit&quot; name=&quot;terms_reject&quot; value=&quot;[%l('TERMS REJECT')%]&quot; /&gt;
+
+    &lt;/form&gt;
+&lt;/div&gt;

Added: trunk/root/skin2/terms/add
===================================================================
--- trunk/root/skin2/terms/add	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/terms/add	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,139 @@
+&lt;h1&gt;[%l('TERMS ADD NEW')%]&lt;/h1&gt;
+
+&lt;form action=&quot;terms/add&quot; method=&quot;POST&quot; name=&quot;new_terms&quot;&gt;
+&lt;table&gt;
+  &lt;tr&gt;
+    &lt;td colspan=&quot;2&quot;&gt;
+      &lt;textarea name=&quot;new_site_terms&quot; id=&quot;new_site_terms&quot; cols=&quot;60&quot; rows=&quot;20&quot; class=&quot;input_text&quot; /&gt;&lt;/textarea&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+
+  &lt;tr&gt;
+    &lt;td colspan=&quot;2&quot; style=&quot;text-align: center;&quot;&gt;
+      &lt;input type=&quot;button&quot; value=&quot;[%l('Preview')%]&quot;        name=&quot;post_reply&quot; class=&quot;input_button&quot; id=&quot;message_preview&quot; /&gt;
+      &lt;input type=&quot;submit&quot; value=&quot;[%l('Post New Terms')%]&quot; name=&quot;post_reply&quot; class=&quot;input_button&quot; /&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/table&gt;
+
+
+&lt;style type=&quot;text/css&quot;&gt;
+	.yui-overlay { position:absolute;background:transparent;border:none;padding:none;margin:none; }
+&lt;/style&gt;
+
+&lt;!-- message preview majick --&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    (function () {
+        ParleyMessagePreview = function() {
+            var Dom         = YAHOO.util.Dom,
+                YU          = YAHOO.util;
+
+            this.config = {
+                trigger     : 'message_preview',
+                user_input  : 'new_site_terms',
+                container   : 'message_container',
+                trigger_evt : 'click'
+            };
+            this.message_source  = false;
+            this.message_preview = false;
+
+            this.handleSuccess = function(o) {
+                var data = eval('(' + o.responseText + ')');
+                var obj = o.argument.obj;
+
+                if (data.formatted) {
+                    obj.previewElId = YU.Dom.generateId();
+
+                    obj.user_input.style.visibility     = 'hidden';
+
+                    /* create a panel to show the preview in */
+                    var pWidth          = obj.user_input.clientWidth,
+                        pHeight         = obj.user_input.clientHeight,
+                        pLeft           = obj.user_input.offsetLeft,
+                        pTop            = obj.user_input.offsetTop;
+
+                    obj.preview_overlay = new YAHOO.widget.Overlay(
+                        &quot;preview_overlay&quot;,
+                        {
+                            context:        [obj.config.user_input, 'tl', 'tl'],
+                            visible:        true,
+                            width:          obj.user_input.clientWidth  + 'px',
+                            height:         obj.user_input.clientHeight + 'px'
+                        }
+                    );
+
+                    obj.preview_overlay.setBody(data.formatted);
+                    obj.preview_overlay.render(document.body);
+                    Dom.get('preview_overlay').style.overflow = 'auto';
+
+
+                    // update the button
+                    obj.trigger.value = '[%l('Edit')%]';
+
+                    YU.Event.removeListener( obj.trigger, 'click' );
+                    YU.Event.addListener(
+                        obj.trigger,
+                        obj.config.trigger_evt,
+                        obj.edit,
+                        obj,
+                        true
+                    );
+
+                }
+            };
+            this.handleFailure = function(o) {
+            };
+
+            this.edit = function() {
+                // update the button
+                this.trigger.value = '[%l('Preview')%]';
+
+                this.user_input.style.visibility     = 'visible';
+                this.preview_overlay.destroy();
+
+                YU.Event.removeListener( this.trigger, 'click' );
+                YU.Event.addListener(
+                    this.trigger,
+                    this.config.trigger_evt,
+                    this.preview,
+                    this,
+                    true
+                );
+            };
+
+            this.preview = function() {
+                var request = YU.Connect.asyncRequest(
+                    'POST',
+                    // '/forumcode/preview',
+                    &quot;[%c.uri_for('/forumcode/preview')%]&quot;,
+                    {
+                        success: this.handleSuccess,
+                        failure: this.handleFailure,
+                        argument: {
+                            obj: this
+                        }
+                    },
+                    'msg_source=' + escape(this.user_input.value)
+                );
+            };
+
+            this.init = function() {
+                this.container  = Dom.get( this.config.container );
+                this.user_input = Dom.get( this.config.user_input );
+                this.trigger    = Dom.get( this.config.trigger );
+
+                YU.Event.addListener(
+                    this.trigger,
+                    this.config.trigger_evt,
+                    this.preview,
+                    this,
+                    true
+                );
+            };
+        };
+    })();
+
+    var MessagePreview = new ParleyMessagePreview();
+    MessagePreview.init();
+&lt;/script&gt;
+&lt;!-- (end) message preview majick --&gt;

Added: trunk/root/skin2/terms/index
===================================================================
--- trunk/root/skin2/terms/index	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/terms/index	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,34 @@
+[% IF terms %]
+    &lt;h1&gt;[%l('Terms and Conditions')%]&lt;/h1&gt;
+    &lt;div class=&quot;site_terms&quot;&gt;
+        [% ForumCode.forumcode(terms.content) %]
+        &lt;div style=&quot;text-align: right;&quot;&gt;
+        [%l('Last Modified')%]: [% nicedate(terms.created) %]
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    [% IF terms.change_summary %]
+    &lt;h1&gt;[%l('Summary of Changes')%]&lt;/h1&gt;
+    &lt;div class=&quot;site_terms&quot;&gt;
+        [% ForumCode.forumcode(terms.change_summary) %]
+    &lt;/div&gt;
+    [% END %]
+[% ELSE %]
+[%l('NO SITE TERMS')%].
+[% END %]
+
+[% IF all_site_terms %]
+&lt;form method=&quot;get&quot; action=&quot;terms&quot;&gt;
+    &lt;div style=&quot;text-align: right;&quot;&gt;
+        &lt;select name=&quot;site_term_id&quot;&gt;
+            [% WHILE (site_terms=all_site_terms.next) %]
+            &lt;option value=&quot;[%site_terms.id%]&quot;&gt;
+                [% nicedate(site_terms.created) %]
+            &lt;/option&gt;
+            [% END %]
+        &lt;/select&gt;
+        &lt;input type=&quot;submit&quot; value=&quot;[%l('View')%]&quot;/&gt;
+    &lt;/div&gt;
+&lt;/form&gt;
+[% END %]
+

Added: trunk/root/skin2/thread/add
===================================================================
--- trunk/root/skin2/thread/add	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/thread/add	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,71 @@
+&lt;div style=&quot;margin-top:10px;&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;thread_header&quot;&gt;
+    &lt;a href=&quot;forum/view?forum=[% current_forum.id %]&quot;&gt;[% current_forum.name %]&lt;/a&gt;
+    &nbsp;:&nbsp;
+    [%l('Start A New Topic')%]
+&lt;/div&gt;
+
+[% IF view.error.message %]
+    [% view.error.message %]
+    &lt;ul&gt;
+        [% FOREACH message IN view.error.messages %]
+            &lt;li&gt;[% message %]&lt;/li&gt;
+        [% END %]
+    &lt;/ul&gt;
+[% END %]
+
+&lt;form action=&quot;thread/add?forum=[% current_forum.id %]&quot; method=&quot;POST&quot; name=&quot;new_thread&quot;&gt;
+    &lt;table class=&quot;thread_add&quot; border=&quot;0&quot;&gt;
+        &lt;tr&gt;
+            &lt;td class=&quot;thread_add_topic&quot;&gt; [%l('Topic')%] &lt;/td&gt;
+            &lt;td&gt;
+            &lt;input type=&quot;text&quot; name=&quot;thread_subject&quot; size=&quot;60&quot; class=&quot;input_text&quot; /&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+
+        &lt;tr&gt;
+            &lt;td class=&quot;thread_add_message&quot;&gt; [%l('Message')%] &lt;/td&gt;
+            &lt;td&gt;
+                &lt;textarea name=&quot;thread_message&quot; id=&quot;thread_message&quot; cols=&quot;60&quot; rows=&quot;20&quot; class=&quot;input_text&quot; /&gt;&lt;/textarea&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+
+        &lt;tr&gt;
+            &lt;td&gt;&nbsp;&lt;/td&gt;
+            &lt;td colspan=&quot;1&quot; style=&quot;text-align: left;&quot;&gt;
+                &lt;span class=&quot;yui-button yui-link-button&quot; style=&quot;margin-right:50px;margin-left:50px;&quot;&gt;
+                    &lt;span class=&quot;first-child&quot;&gt;
+                        &lt;a href=&quot;[%c.uri_for('/forum/view',{'forum'=&gt;current_forum.id})%]&quot;&gt;[%l('Cancel')%]&lt;/a&gt;
+                    &lt;/span&gt;
+                &lt;/span&gt;
+
+                &lt;input type=&quot;button&quot; value=&quot;[%l('Preview')%]&quot; name=&quot;preview_reply&quot; class=&quot;&quot; id=&quot;message_preview&quot; /&gt;
+                &lt;input type=&quot;submit&quot; value=&quot;[%l('Post New Topic')%]&quot; name=&quot;post_reply&quot; class=&quot;&quot; /&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+
+        &lt;tr&gt;
+            &lt;td colspan=&quot;2&quot; align=&quot;right&quot;&gt;
+                &lt;input type=&quot;checkbox&quot; name=&quot;watch_on_post&quot; value=&quot;1&quot; [% IF authed_user.preference.watch_on_post %]checked=&quot;checked&quot; [% END %]/&gt;
+                [%l('ADD THREAD WATCH')%] 
+            &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;/table&gt;
+&lt;/form&gt;
+
+&lt;style type=&quot;text/css&quot;&gt;
+	.yui-overlay { position:absolute;background:transparent;border:none;padding:none;margin:none; }
+&lt;/style&gt;
+
+&lt;!-- message preview majick --&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/MessagePreview-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var MessagePreview = new ParleyMessagePreview();
+
+    MessagePreview.config.label_preview = '[%l('Preview')%]';
+    MessagePreview.config.label_edit    = '[%l('Edit')%]';
+    MessagePreview.config.post_url      = &quot;[%c.uri_for('/forumcode/preview')%]&quot;;
+
+    MessagePreview.init();
+&lt;/script&gt;
+&lt;!-- (end) message preview majick --&gt;

Added: trunk/root/skin2/thread/recent
===================================================================
--- trunk/root/skin2/thread/recent	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/thread/recent	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,12 @@
+&lt;h1&gt;[%l('Recently Updated Threads')%]&lt;/h1&gt;
+
+[%- IF thread_list.count &gt; 0 %]
+[% PROCESS shared/pager_advanced %]
+&lt;table class=&quot;recently_updated&quot;&gt;
+    [% WHILE (thread = thread_list.next) %]
+    [% PROCESS shared/postinfo_table_row show_forum_name=1 %]
+    [% END %]
+&lt;/table&gt;
+[% ELSE %]
+[%l('NO RECENT THREADS')%]
+[% END %]

Added: trunk/root/skin2/thread/reply
===================================================================
--- trunk/root/skin2/thread/reply	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/thread/reply	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,155 @@
+&lt;div style=&quot;margin-top:10px;&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;thread_header&quot;&gt;
+    &lt;a href=&quot;forum/view?forum=[% current_forum.id %]&quot;&gt;[% ForumCode.escape(current_forum.name) %]&lt;/a&gt;
+    &nbsp;:&nbsp;
+    [%l('Replying To')%]
+    &nbsp;:&nbsp;
+    [% ForumCode.escape(current_thread.subject) %]
+&lt;/div&gt;
+
+[%# different action depending on whether we're adding to a thread or replying to a specific post %]
+[% IF current_post %]
+&lt;form action=&quot;thread/reply?post=[% current_post.id %]&quot; method=&quot;POST&quot; name=&quot;new_thread&quot;&gt;
+[% ELSE %]
+&lt;form action=&quot;thread/reply?thread=[% current_thread.id %]&quot; method=&quot;POST&quot; name=&quot;new_thread&quot;&gt;
+[% END %]
+
+&lt;!-- The post we're replying to --&gt;
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &lt;div style=&quot;text-align:right; vertical-align: top;&quot;&gt;
+            &lt;p class=&quot;post_creator&quot;&gt;
+            [% responding_to_post.creator.forum_name %]
+            &lt;/p&gt;
+            &lt;p class=&quot;post_created&quot;&gt;
+            [% nicedate(responding_to_post.created) %]
+            &lt;/p&gt;
+        &lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;div class=&quot;reply_post_message innerpost&quot;&gt;
+            [% FILTER html_line_break %][% ForumCode.forumcode(responding_to_post.message) %][% END %]
+        &lt;/div&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+
+[% IF messages %]
+&lt;p&gt;
+    &lt;ul&gt;
+        [% FOREACH message IN messages %]
+            &lt;li&gt;[% message %]&lt;/li&gt;
+        [% END %]
+    &lt;/ul&gt;
+&lt;/p&gt;
+[% END %]
+
+&lt;p style=&quot;padding:10px;&quot;&gt;[%l('ENTER REPLY')%]:&lt;/p&gt;
+
+&lt;!-- replies may have their own subject line --&gt;
+[% IF c.config.replies_have_own_subject %]
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &lt;div style=&quot;text-align:right; vertical-align: top;&quot;&gt;
+            [%l('Topic')%]:
+        &lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;input type=&quot;text&quot; name=&quot;thread_subject&quot; size=&quot;60&quot; class=&quot;input_text&quot; value=&quot;[% current_thread.subject %]&quot; /&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+[% END %]
+
+&lt;!-- possibly quoting an existing post --&gt;
+[% IF quote_post %]
+  &lt;input type=&quot;hidden&quot; name=&quot;have_quoted_post&quot; value=&quot;1&quot; /&gt;
+  &lt;input type=&quot;hidden&quot; name=&quot;__post&quot; value=&quot;[% quote_post.id %]&quot; /&gt;
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &nbsp;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;span class=&quot;post_creator&quot;&gt;
+            [% quote_post.creator.forum_name %] [%l('said')%]:
+        &lt;/span&gt;
+        &lt;br /&gt;
+        &lt;textarea name=&quot;quote_message&quot; cols=&quot;60&quot; rows=&quot;10&quot; class=&quot;quoted_reply_textarea&quot; /&gt;[% quote_post.message %]&lt;/textarea&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+[% END %]
+
+&lt;!-- the reply area --&gt;
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &lt;div style=&quot;text-align:right; vertical-align: top;&quot;&gt;
+            [%l('Message')%]:
+        &lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;textarea name=&quot;thread_message&quot; id=&quot;thread_message&quot; cols=&quot;60&quot; rows=&quot;20&quot; class=&quot;input_text&quot; /&gt;&lt;/textarea&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+
+&lt;!-- button row --&gt;
+&lt;div class=&quot;yui-g&quot;&gt;
+	&lt;div class=&quot;yui-g first&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot; style=&quot;text-align:center;&quot;&gt;
+            &lt;input type=&quot;button&quot; value=&quot;[%l('Preview')%]&quot;   accesskey=&quot;P&quot; name=&quot;post_reply&quot; class=&quot;input_button&quot; id=&quot;message_preview&quot; /&gt;
+		&lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-g&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot; style=&quot;text-align:center;&quot;&gt;
+            &lt;input type=&quot;submit&quot; value=&quot;[%l('Add Reply')%]&quot; accesskey=&quot;S&quot; name=&quot;post_reply&quot; class=&quot;input_button&quot; /&gt;
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+
+&lt;!-- extra actions --&gt;
+&lt;div class=&quot;yui-g&quot; style=&quot;margin-top:20px;&quot;&gt;
+	&lt;div class=&quot;yui-g first&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot; style=&quot;text-align:center;&quot;&gt;
+            [% IF moderator %]
+            &lt;input type=&quot;checkbox&quot; name=&quot;lock_thread&quot; value=&quot;1&quot; /&gt; [%l('LOCK AFTER POSTING')%] 
+            [% ELSE %]
+            &nbsp;
+            [% END %]
+		&lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-g&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot; style=&quot;text-align:center;&quot;&gt;
+            &lt;input type=&quot;checkbox&quot; name=&quot;watch_on_post&quot; value=&quot;1&quot; [% IF authed_user.preference.watch_on_post %]checked=&quot;checked&quot; [% END %]/&gt;
+            [%l('ADD THREAD WATCH')%] 
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+&lt;/form&gt;
+
+&lt;style type=&quot;text/css&quot;&gt;
+	.yui-overlay { position:absolute;background:transparent;border:none;padding:none;margin:none; }
+&lt;/style&gt;
+
+&lt;!-- message preview majick --&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/MessagePreview-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var MessagePreview = new ParleyMessagePreview();
+
+    MessagePreview.config.label_preview = '[%l('Preview')%]';
+    MessagePreview.config.label_edit    = '[%l('Edit')%]';
+    MessagePreview.config.post_url      = &quot;[%c.uri_for('/forumcode/preview')%]&quot;;
+
+    MessagePreview.init();
+&lt;/script&gt;
+&lt;!-- (end) message preview majick --&gt;
+
+[% PROCESS shared/loading_please_wait %]

Added: trunk/root/skin2/thread/reply-yuirte
===================================================================
--- trunk/root/skin2/thread/reply-yuirte	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/thread/reply-yuirte	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,243 @@
+&lt;div style=&quot;margin-top:10px;&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;thread_header&quot;&gt;
+    &lt;a href=&quot;forum/view?forum=[% current_forum.id %]&quot;&gt;[% ForumCode.escape(current_forum.name) %]&lt;/a&gt;
+    &nbsp;:&nbsp;
+    [%l('Replying To')%]
+    &nbsp;:&nbsp;
+    [% ForumCode.escape(current_thread.subject) %]
+&lt;/div&gt;
+
+[%# different action depending on whether we're adding to a thread or replying to a specific post %]
+[% IF current_post %]
+&lt;form action=&quot;thread/reply?post=[% current_post.id %]&quot; method=&quot;POST&quot; name=&quot;new_thread&quot;&gt;
+[% ELSE %]
+&lt;form action=&quot;thread/reply?thread=[% current_thread.id %]&quot; method=&quot;POST&quot; name=&quot;new_thread&quot;&gt;
+[% END %]
+
+&lt;!-- The post we're replying to --&gt;
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &lt;div style=&quot;text-align:right; vertical-align: top;&quot;&gt;
+            &lt;p class=&quot;post_creator&quot;&gt;
+            [% responding_to_post.creator.forum_name %]
+            &lt;/p&gt;
+            &lt;p class=&quot;post_created&quot;&gt;
+            [% nicedate(responding_to_post.created) %]
+            &lt;/p&gt;
+        &lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;div class=&quot;reply_post_message innerpost&quot;&gt;
+            [% FILTER html_line_break %][% ForumCode.forumcode(responding_to_post.message) %][% END %]
+        &lt;/div&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+
+[% IF messages %]
+&lt;p&gt;
+    &lt;ul&gt;
+        [% FOREACH message IN messages %]
+            &lt;li&gt;[% message %]&lt;/li&gt;
+        [% END %]
+    &lt;/ul&gt;
+&lt;/p&gt;
+[% END %]
+
+&lt;p style=&quot;padding:10px;&quot;&gt;[%l('ENTER REPLY')%]:&lt;/p&gt;
+
+&lt;!-- replies may have their own subject line --&gt;
+[% IF c.config.replies_have_own_subject %]
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &lt;div style=&quot;text-align:right; vertical-align: top;&quot;&gt;
+            [%l('Topic')%]:
+        &lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;input type=&quot;text&quot; name=&quot;thread_subject&quot; size=&quot;60&quot; class=&quot;input_text&quot; value=&quot;[% current_thread.subject %]&quot; /&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+[% END %]
+
+&lt;!-- possibly quoting an existing post --&gt;
+[% IF quote_post %]
+  &lt;input type=&quot;hidden&quot; name=&quot;have_quoted_post&quot; value=&quot;1&quot; /&gt;
+  &lt;input type=&quot;hidden&quot; name=&quot;__post&quot; value=&quot;[% quote_post.id %]&quot; /&gt;
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &nbsp;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;span class=&quot;post_creator&quot;&gt;
+            [% quote_post.creator.forum_name %] [%l('said')%]:
+        &lt;/span&gt;
+        &lt;br /&gt;
+        &lt;textarea name=&quot;quote_message&quot; cols=&quot;60&quot; rows=&quot;10&quot; class=&quot;quoted_reply_textarea&quot; /&gt;[% quote_post.message %]&lt;/textarea&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+[% END %]
+
+&lt;!-- the reply area --&gt;
+&lt;div class=&quot;yui-gf&quot; style=&quot;margin-top:10px;margin-bottom:10px;&quot;&gt;
+	&lt;div class=&quot;yui-u first&quot;&gt;
+        &lt;div style=&quot;text-align:right; vertical-align: top;&quot;&gt;
+            [%l('Message')%]:
+        &lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-u&quot;&gt;
+        &lt;textarea name=&quot;Xthread_message&quot; id=&quot;Xthread_message&quot; cols=&quot;60&quot; rows=&quot;20&quot; class=&quot;input_text&quot; /&gt;&lt;/textarea&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+
+&lt;!-- button row --&gt;
+&lt;div class=&quot;yui-g&quot;&gt;
+	&lt;div class=&quot;yui-g first&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot; style=&quot;text-align:center;&quot;&gt;
+            &lt;input type=&quot;button&quot; value=&quot;[%l('Preview')%]&quot;   accesskey=&quot;P&quot; name=&quot;post_reply&quot; class=&quot;input_button&quot; id=&quot;message_preview&quot; /&gt;
+		&lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-g&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot; style=&quot;text-align:center;&quot;&gt;
+            &lt;input type=&quot;submit&quot; value=&quot;[%l('Add Reply')%]&quot; accesskey=&quot;S&quot; name=&quot;post_reply&quot; class=&quot;input_button&quot; /&gt;
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+
+&lt;!-- extra actions --&gt;
+&lt;div class=&quot;yui-g&quot; style=&quot;margin-top:20px;&quot;&gt;
+	&lt;div class=&quot;yui-g first&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot; style=&quot;text-align:center;&quot;&gt;
+            [% IF moderator %]
+            &lt;input type=&quot;checkbox&quot; name=&quot;lock_thread&quot; value=&quot;1&quot; /&gt; [%l('LOCK AFTER POSTING')%] 
+            [% ELSE %]
+            &nbsp;
+            [% END %]
+		&lt;/div&gt;
+	&lt;/div&gt;
+	&lt;div class=&quot;yui-g&quot;&gt;
+		&lt;div class=&quot;yui-u first&quot; style=&quot;text-align:center;&quot;&gt;
+            &lt;input type=&quot;checkbox&quot; name=&quot;watch_on_post&quot; value=&quot;1&quot; [% IF authed_user.preference.watch_on_post %]checked=&quot;checked&quot; [% END %]/&gt;
+            [%l('ADD THREAD WATCH')%] 
+		&lt;/div&gt;
+		&lt;div class=&quot;yui-u&quot;&gt;
+			&nbsp;
+		&lt;/div&gt;
+	&lt;/div&gt;
+&lt;/div&gt;
+    &lt;textarea name=&quot;thread_message&quot; id=&quot;yui_message_editor&quot;&gt;Foo [b]bar[/b] baz&lt;/textarea&gt;
+&lt;/form&gt;
+
+&lt;style type=&quot;text/css&quot;&gt;
+	.yui-overlay { position:absolute;background:transparent;border:none;padding:none;margin:none; }
+&lt;/style&gt;
+
+&lt;!-- message preview majick --&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/MessagePreview-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+/*
+    var MessagePreview = new ParleyMessagePreview();
+
+    MessagePreview.config.label_preview = '[%l('Preview')%]';
+    MessagePreview.config.label_edit    = '[%l('Edit')%]';
+    MessagePreview.config.post_url      = &quot;[%c.uri_for('/post/preview')%]&quot;;
+
+    MessagePreview.init();
+*/
+&lt;/script&gt;
+&lt;!-- (end) message preview majick --&gt;
+
+[% PROCESS shared/loading_please_wait %]
+
+
+&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/fonts/fonts-min.css')%]&quot; /&gt;
+&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/editor/assets/skins/sam/simpleeditor.css')%]&quot; /&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/yahoo-dom-event/yahoo-dom-event.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/element/element-beta-min.js')%]&quot;&gt;&lt;/script&gt;
+
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/container/container_core-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/editor/simpleeditor-min.js')%]&quot;&gt;&lt;/script&gt;
+
+&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/menu/assets/skins/sam/menu.css')%]&quot; /&gt;
+&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/button/assets/skins/sam/button.css')%]&quot; /&gt;
+&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/fonts/fonts-min.css')%]&quot; /&gt;
+&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/container/assets/skins/sam/container.css')%]&quot; /&gt;
+&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[%c.uri_for('/static/yui/editor/assets/skins/sam/editor.css')%]&quot; /&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/yahoo-dom-event/yahoo-dom-event.js')%]&quot;&gt;&lt;/script&gt;
+
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/animation/animation-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/element/element-beta-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/container/container-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/menu/menu-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/button/button-min.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/yui/editor/editor-min.js')%]&quot;&gt;&lt;/script&gt;
+
+
+&lt;script&gt;
+
+(function() { 
+    //Setup some private variables 
+    var Dom = YAHOO.util.Dom, 
+    Event = YAHOO.util.Event; 
+
+    var myToolbar =  {
+        collapse: true,
+        titlebar: 'Text Editing Tools',
+        draggable: false,
+        buttonType: 'advanced',
+        buttons: [
+            { group: 'textstyle', label: 'Font Style',
+                buttons: [
+                    { type: 'push', label: 'Bold CTRL + SHIFT + B', value: 'bold' },
+                    { type: 'push', label: 'Italic CTRL + SHIFT + I', value: 'italic' },
+                    { type: 'push', label: 'Underline CTRL + SHIFT + U', value: 'underline' },
+                    { type: 'separator' },
+                    { type: 'color', label: 'Font Color', value: 'forecolor', disabled: true },
+                ]
+            },
+            { type: 'separator' },
+            { group: 'indentlist', label: 'Lists',
+                buttons: [
+                    { type: 'push', label: 'Indent', value: 'indent', disabled: true },
+                    { type: 'push', label: 'Outdent', value: 'outdent', disabled: true },
+                    { type: 'push', label: 'Create an Unordered List', value: 'insertunorderedlist' },
+                    { type: 'push', label: 'Create an Ordered List', value: 'insertorderedlist' }
+                ]
+            },
+            { type: 'separator' },
+            { group: 'insertitem', label: 'Insert Item',
+                buttons: [
+                    { type: 'push', label: 'HTML Link CTRL + SHIFT + L', value: 'createlink', disabled: true },
+                    { type: 'push', label: 'Insert Image', value: 'insertimage' }
+                ]
+            }
+        ]
+    };
+
+
+    //The Editor config 
+    var myConfig = { 
+        height: '300px', 
+        width: '600px', 
+        animate: true, 
+        dompath: true, 
+        focusAtStart: true,
+
+        toolbar: myToolbar,
+    }; 
+
+    //Now let's load the Editor.. 
+    var myEditor = new YAHOO.widget.Editor('yui_message_editor', myConfig); 
+    myEditor.render(); 
+})(); 
+
+&lt;/script&gt;
+

Added: trunk/root/skin2/thread/view
===================================================================
--- trunk/root/skin2/thread/view	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/thread/view	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,197 @@
+&lt;!-- thread/view --&gt;
+[% SET dummy_value = post_list.reset %]
+
+&lt;h1&gt;Skin 2&lt;/h1&gt;
+
+&lt;!-- thread contents --&gt;
+&lt;table class=&quot;thread_posts&quot;&gt;
+    &lt;tbody&gt;
+        &lt;tr&gt;
+            &lt;td colspan=&quot;2&quot; class=&quot;thread_header&quot;&gt;
+                &lt;a href=&quot;forum/view?forum=[% current_forum.id %]&quot;&gt;[% ForumCode.escape(current_forum.name) %]&lt;/a&gt;
+                &nbsp;:&nbsp;
+                [% ForumCode.escape(current_thread.subject) %]
+            &lt;/td&gt;
+        &lt;/tr&gt;
+
+        &lt;!-- I'd really like to do this without a nested table --&gt;
+        &lt;tr&gt;
+            &lt;td colspan=&quot;2&quot;&gt;
+                &lt;table class=&quot;thread_info&quot;&gt;
+                    &lt;tbody&gt;
+                        &lt;tr&gt;
+                            &lt;td width=&quot;50%&quot;&gt;
+                                &lt;small&gt;
+                                    [%l('[quant,_1,view]',current_thread.view_count)%].
+                                &lt;/small&gt;
+                            &lt;/td&gt;
+                            &lt;td width=&quot;50%&quot; align=&quot;right&quot;&gt;
+                                [% PROCESS shared/pager_advanced %]
+                            &lt;/td&gt;
+                        &lt;/tr&gt;
+                        &lt;tr&gt;
+                            &lt;td width=&quot;50%&quot;&gt;
+                                [% PROCESS shared/thread_watch %]
+                            &lt;/td&gt;
+                            &lt;td width=&quot;50%&quot; align=&quot;right&quot;&gt;
+                                &lt;small&gt;
+                                [% IF current_thread.locked %]
+                                    [%l('Thread Locked')%] 
+                                    &lt;img src=&quot;static/images/icons/lock.png&quot; alt=&quot;[%l('Locked')%]&quot; title=&quot;[%l('Locked Topic')%]&quot; width=&quot;16&quot; height=&quot;16&quot; /&gt;
+                                [% ELSIF authed_user %]
+                                    &lt;span class=&quot;yui-button yui-link-button&quot;&gt;
+                                        &lt;span class=&quot;first-child&quot;&gt;
+                                            &lt;a href=&quot;thread/reply?thread=[% current_thread.id %]&quot;&gt;[%l('Reply')%]&lt;/a&gt;
+                                        &lt;/span&gt;
+                                    &lt;/span&gt;
+                                [% END %]
+                                &lt;/small&gt;
+                            &lt;/td&gt;
+                        &lt;/tr&gt;
+                    &lt;/tbody&gt;
+                &lt;/table&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;!-- end : nested table evil --&gt;
+
+    &lt;!-- thread posts --&gt;
+    [% WHILE (post = post_list.next) %]
+        &lt;tr class=&quot;thread_post_row&quot;&gt;
+            &lt;td class=&quot;user_post_info&quot;&gt;
+                &lt;a name=&quot;[%post.id%]&quot;&gt;&lt;/a&gt;
+                &lt;!-- user avatar --&gt;
+                [% avatar_file = c.path_to('root') _ &quot;/static/user_file/${post.creator.id}/avatar.jpg&quot; %]
+                [% TRY %]
+                    [% USE avatar = Image(avatar_file) %]
+                    [% tmp = avatar.attr %]
+                    &lt;img class=&quot;picborder&quot; src=&quot;/static/user_file/[% post.creator.id %]/avatar.jpg&quot; border=&quot;0&quot; [% avatar.attr %] alt=&quot;Avatar&quot; /&gt;
+                    &lt;br /&gt;
+                [% CATCH %]
+                    &lt;!-- No User Avatar --&gt;
+                [% END %]
+                &lt;!-- end : user avatar --&gt;
+
+                &lt;a href=&quot;user/profile?user=[% post.creator.id %]&quot;&gt;[% post.creator.forum_name %]&lt;/a&gt;
+
+                &lt;br /&gt;
+                [%l('[quant,_1,post]', post.creator.post_count)%]
+            &lt;/td&gt;
+
+            &lt;td class=&quot;post&quot;&gt;
+                    [% IF post.admin_editor %]
+                    &lt;div class=&quot;admin_edited_post&quot;&gt;
+                        [%l('Post Edited By: [_1]', post.admin_editor.forum_name)%]:
+                        [% IF post.locked %]
+                        &lt;img src=&quot;static/images/icons/lock.png&quot; alt=&quot;[%l('Locked')%]&quot; title=&quot;[%l('Locked Post')%]&quot; width=&quot;16&quot; height=&quot;16&quot; /&gt;
+                        [% END %]
+                    &lt;/div&gt;
+                    [% END %]
+                &lt;!-- the body of the post --&gt;
+                &lt;div class=&quot;innerpost&quot;&gt;
+                    [% IF post.quoted_post %]
+                    &lt;div class=&quot;quote&quot;&gt;
+                    &lt;strong&gt;[%l('[_1] wrote:', post.quoted_post.creator.forum_name)%]&lt;/strong&gt;&lt;br&gt;
+                    [% ForumCode.forumcode(post.quoted_text) %]&lt;br /&gt;
+                    &lt;/div&gt;
+                    &lt;br /&gt;
+                    [% END %]
+                    [% ForumCode.forumcode(post.message) %]&lt;br /&gt;
+                &lt;/div&gt;
+                &lt;!-- end : the body of the post --&gt;
+
+                &lt;div class=&quot;post_info&quot;&gt;
+                    [% post.interval_ago %] ago
+                    &lt;br /&gt;
+                    [% nicedate(post.created) %]
+                    [% IF post.edited %]
+                    &lt;br /&gt;&lt;span class=&quot;post_edited_alert&quot;&gt;[%l('Edited')%]: [% nicedate(post.edited) %]&lt;/span&gt;
+                    [% END %]
+                    &lt;br /&gt;
+                    [% IF post.ip_addr %]
+                        [% IF moderator %]
+                        &lt;a href=&quot;[%c.uri_for('/site/ip_info',{address=&gt;post.ip_addr})%]&quot;&gt;
+                            [%l('Posted from [_1]', post.ip_addr)%]
+                        &lt;/a&gt;
+                        [% ELSE %]
+                           [%l('IP Logged')%] 
+                        [% END %]
+                    [% END %]
+                    [% IF (!current_thread.locked &amp;&amp; authed_user) %]
+                        &lt;br /&gt;
+                        &lt;br /&gt;
+                        [% IF ((authed_user.id == post.creator.id) &amp;&amp; !post.locked) || moderator %]
+                        &lt;span class=&quot;yui-button yui-link-button&quot;&gt;
+                            &lt;span class=&quot;first-child&quot;&gt;
+                                &lt;a href=&quot;post/edit?post=[% post.id %]&quot;&gt;[%l('Edit')%]&lt;/a&gt;
+                            &lt;/span&gt;
+                        &lt;/span&gt;
+                        [% END %]
+                        &lt;span class=&quot;yui-button yui-link-button&quot;&gt;
+                            &lt;span class=&quot;first-child&quot;&gt;
+                                &lt;a href=&quot;thread/reply?post=[% post.id %]&quot;&gt;[%l('Quote')%]&lt;/a&gt;
+                            &lt;/span&gt;
+                        &lt;/span&gt;
+                        &lt;span class=&quot;yui-button yui-link-button&quot;&gt;
+                            &lt;span class=&quot;first-child&quot;&gt;
+                                &lt;a href=&quot;thread/reply?thread=[% current_thread.id %]&quot;&gt;[%l('Reply')%]&lt;/a&gt;
+                            &lt;/span&gt;
+                        &lt;/span&gt;
+                    [% END %]
+                &lt;/div&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+    [% END %]
+    &lt;!-- end : thread posts --&gt;
+
+    &lt;!-- post thread info --&gt;
+        &lt;!-- I'd really like to do this without a nested table --&gt;
+        &lt;tr&gt;
+            &lt;td colspan=&quot;2&quot;&gt;
+                &lt;table class=&quot;thread_info&quot;&gt;
+                    &lt;tbody&gt;
+                        &lt;tr&gt;
+                            &lt;td width=&quot;50%&quot;&gt;
+                                [% PROCESS shared/thread_watch %]
+                            &lt;/td&gt;
+                            &lt;td width=&quot;50%&quot; align=&quot;right&quot;&gt;
+                                [% PROCESS shared/pager_advanced %]
+                            &lt;/td&gt;
+                        &lt;/tr&gt;
+                        &lt;tr&gt;
+                            &lt;td width=&quot;50%&quot;&gt;
+                                &lt;small&gt;
+                                    [% current_thread.view_count %]
+                                    [% IF current_thread.view_count == 1 %][%l('view')%][% ELSE %][%l('views')%][% END %].
+                                &lt;/small&gt;
+                            &lt;/td&gt;
+                            &lt;td width=&quot;50%&quot; align=&quot;right&quot;&gt;
+                                &lt;small&gt;
+                                [% IF current_thread.locked %]
+                                    [%l('Thread Locked')%] 
+                                    &lt;img src=&quot;static/images/icons/lock.png&quot; alt=&quot;[%l('Locked')%]&quot; title=&quot;[%l('Locked Topic')%]&quot; width=&quot;16&quot; height=&quot;16&quot; /&gt;
+                                [% ELSIF authed_user %]
+                                    &lt;span class=&quot;yui-button yui-link-button&quot;&gt;
+                                        &lt;span class=&quot;first-child&quot;&gt;
+                                            &lt;a href=&quot;thread/reply?thread=[% current_thread.id %]&quot;&gt;[%l('Reply')%]&lt;/a&gt;
+                                        &lt;/span&gt;
+                                    &lt;/span&gt;
+                                [% END %]
+                                &lt;/small&gt;
+                            &lt;/td&gt;
+                        &lt;/tr&gt;
+                    &lt;/tbody&gt;
+                &lt;/table&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;!-- end : nested table evil --&gt;
+    &lt;!-- end : post thread info --&gt;
+    &lt;tr&gt;
+        &lt;td colspan=&quot;2&quot;&gt;
+            [% PROCESS shared/moderator_list %]
+        &lt;/td&gt;
+    &lt;/tr&gt;
+
+    &lt;/tbody&gt;
+&lt;/table&gt;
+&lt;!-- end : thread contents --&gt;
+&lt;!-- end : thread/view --&gt;

Added: trunk/root/skin2/thread/watches
===================================================================
--- trunk/root/skin2/thread/watches	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/thread/watches	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,94 @@
+&lt;h1&gt;Watched Threads&lt;/h1&gt;
+
+[% IF thread_watches &gt; 0 %]
+&lt;form method=&quot;post&quot; style=&quot;width:98%;max-width:none;&quot;&gt;
+    &lt;table class=&quot;thread_watches&quot;&gt;
+        &lt;tbody&gt;
+            &lt;tr&gt;
+                &lt;th style=&quot;width:14px;&quot;&gt;&nbsp;&lt;/th&gt;
+                &lt;th&gt;Subject&lt;/th&gt;
+                &lt;th&gt;Last Post Made&lt;/th&gt;
+                &lt;th&gt;Last Post Viewed&lt;/th&gt;
+            &lt;/tr&gt;
+            [% WHILE (watch = thread_watches.next) %]
+            [% thread = watch.thread %]
+            &lt;tr&gt;
+                &lt;td style=&quot;width:14px; vertical-align: middle;&quot;&gt;
+                    [% IF (thread.last_post.created &gt; watch.timestamp) %]
+                    &lt;img src=&quot;static/images/unread_posts.gif&quot; width=&quot;12&quot; height=&quot;12&quot; alt=&quot;Unread Posts&quot; title=&quot;Unread Posts&quot; /&gt;
+                    [% ELSE %]
+                    &nbsp;
+                    [% END %]
+                &lt;/td&gt;
+                &lt;td&gt;
+                    &lt;a href=&quot;thread/view?thread=[% thread.id %]&quot; class=&quot;topic_link&quot;&gt;
+                    [% ForumCode.escape(watch.thread.subject) |truncate(45) %]
+                    &lt;/a&gt;
+                    &lt;br /&gt;
+                    &lt;span class=&quot;forum_mini_pager&quot;&gt;
+                        [%- IF authed_user || mini_pager %]
+                        [
+                            [%- IF authed_user %]
+                            &lt;a href=&quot;thread/next_post?thread=[% thread.id %]&quot;&gt;Continue&lt;/a&gt;
+                            [%- END %]
+                        ]
+                        [%- END %]
+                    &lt;/span&gt;
+                &lt;/td&gt;
+
+                &lt;td&gt;
+                    [% nicedate(thread.last_post.created) %]
+                    &lt;br /&gt;&lt;span class=&quot;interval_ago&quot;&gt;
+                        [% thread.last_post.interval_ago %] ago
+                        &lt;/span&gt;
+                    &lt;br /&gt;
+                    &lt;span class=&quot;topic_creator&quot;&gt;last post by
+                    &lt;span class=&quot;post_creator&quot;&gt;[% thread.last_post.creator.forum_name %]&lt;/span&gt;
+                    &lt;/span&gt;
+                &lt;/td&gt;
+
+                &lt;td&gt;
+                    [% nicedate(watch.timestamp) %]
+                    &lt;br /&gt;&lt;span class=&quot;interval_ago&quot;&gt;
+                        [% watch.interval_ago %] ago
+                        &lt;/span&gt;
+                    &lt;br /&gt;
+                    [% IF (thread.last_post.created &gt; watch.timestamp) %]
+                    &lt;span class=&quot;topic_creator&quot;&gt;Unread posts&lt;/span&gt;
+                    [% END %]
+                &lt;/td&gt;
+                &lt;td style=&quot;width:14px;&quot;&gt;
+                    &lt;input type=&quot;checkbox&quot; name=&quot;stop_watching&quot; value=&quot;[% thread.id %]&quot; /&gt;
+                &lt;/td&gt;
+            &lt;/tr&gt;
+            [% END %]
+            &lt;tr&gt;
+                &lt;td colspan=&quot;5&quot; class=&quot;right_align&quot;&gt;
+                    &lt;small&gt;
+                        &lt;a href=&quot;javascript:toggle_all('stop_watching',1);&quot;&gt;Select All&lt;/a&gt;
+                        &lt;a href=&quot;javascript:toggle_all('stop_watching',0);&quot;&gt;Deselect All&lt;/a&gt;
+                    &lt;/small&gt;
+                &lt;/td&gt;
+            &lt;/tr&gt;
+            &lt;tr&gt;
+                &lt;td colspan=&quot;5&quot; class=&quot;center_align&quot;&gt;
+                    &lt;input type=&quot;submit&quot; value=&quot;Stop Watching Selected Threads&quot; /&gt;
+                &lt;/td&gt;
+            &lt;/tr&gt;
+        &lt;/tbody&gt;
+    &lt;/table&gt;
+&lt;/form&gt;
+[% ELSE %]
+    &lt;p&gt;You are not watching any threads&lt;/p&gt;
+[% END %]
+
+&lt;script type=&quot;text/javascript&quot;&gt;
+    /* set the 'checked' value for all items matching 'name' to 'value' (0|1) */
+    function toggle_all(name,value) {
+        //alert( name );
+        var cboxes = document.getElementsByName( name );
+        for (var i=0;i&lt;cboxes.length;i++) {
+            cboxes[i].checked = value;
+        }
+    }
+&lt;/script&gt;

Added: trunk/root/skin2/user/access_ip_banned
===================================================================
--- trunk/root/skin2/user/access_ip_banned	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/access_ip_banned	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,3 @@
+&lt;h1&gt;[%l('Access Denied')%]&lt;/h1&gt;
+
+[%l('Access to this application is not permitted from [_1]', c.request.address)%]

Added: trunk/root/skin2/user/auth_emailed
===================================================================
--- trunk/root/skin2/user/auth_emailed	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/auth_emailed	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,8 @@
+&lt;h1&gt;[%l('USER ALMOST THERE')%]&lt;/h1&gt;
+
+&lt;p&gt;[%l('Thanks for signing up')%] [% newdata.first_name %]!&lt;/p&gt;
+
+&lt;p&gt;
+[%l('An email has been sent to')%] &lt;i&gt;[% newdata.email %]&lt;/i&gt;.&lt;br /&gt;
+[%l('USER ACTIVATE')%].
+&lt;/p&gt;

Added: trunk/root/skin2/user/auth_success
===================================================================
--- trunk/root/skin2/user/auth_success	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/auth_success	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,6 @@
+&lt;h1&gt;[%l('Registration Complete')%]&lt;/h1&gt;
+
+&lt;p&gt;
+[%l('Your registration has been authenticated')%].
+[%l('Click on the login link to continue')%].
+&lt;/p&gt;

Added: trunk/root/skin2/user/login
===================================================================
--- trunk/root/skin2/user/login	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/login	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,40 @@
+&lt;div class=&quot;user_login&quot;&gt;
+    &lt;form action=&quot;[%c.uri_for('/user/login')%]&quot; method=&quot;post&quot; name=&quot;login_form&quot;&gt;
+        &lt;fieldset&gt;
+            &lt;p&gt;
+                [% IF login_message %]
+                [% login_message %]&lt;br /&gt;
+                [% ELSE %]
+                [% message %]&lt;br /&gt;
+                [% END %]
+            &lt;/p&gt;
+            &lt;label for=&quot;username&quot; accesskey=&quot;u&quot;&gt;&lt;b&gt;[%l('Username')%]:&lt;/b&gt;&lt;/label&gt;
+            &lt;br /&gt;
+            &lt;input type=&quot;text&quot; id=&quot;login_username&quot; name=&quot;username&quot; size=&quot;40&quot; class=&quot;input_text&quot; tabindex=&quot;1&quot; /&gt;
+            &lt;br /&gt;
+            &lt;br /&gt;
+
+            &lt;label for=&quot;login_password&quot; accesskey=&quot;p&quot;&gt;&lt;b&gt;[%l('Password')%]:&lt;/b&gt;&lt;/label&gt;
+            &lt;br /&gt;
+            &lt;input type=&quot;password&quot; id=&quot;login_password&quot; name=&quot;password&quot; size=&quot;40&quot; class=&quot;input_text&quot; tabindex=&quot;2&quot; /&gt;
+            &lt;br /&gt;
+
+            &lt;br /&gt;
+            &lt;button type=&quot;submit&quot; class=&quot;input_button&quot; tabindex=&quot;3&quot; /&gt;[%l('Login')%]&lt;/button&gt;
+
+                &lt;p align=&quot;right&quot;&gt;
+                &lt;a href=&quot;[%c.uri_for('/user/password/forgotten')%]&quot;&gt;[%l('Forgotten Password')%]&lt;/a&gt;
+                |
+                &lt;a href=&quot;[%c.uri_for('/user/signup')%]&quot;&gt;[%l('Register')%]&lt;/a&gt;
+                &lt;/p&gt;
+        &lt;/fieldset&gt;
+    &lt;/form&gt;
+&lt;/div&gt;
+
+&lt;!-- put focus into the username field on the form above --&gt;
+&lt;script language=&quot;JavaScript&quot;&gt;
+	&lt;!-- Begin
+    document.forms['login_form'].elements['username'].focus();
+	// End --&gt;
+&lt;/script&gt;
+

Added: trunk/root/skin2/user/login_ip_banned
===================================================================
--- trunk/root/skin2/user/login_ip_banned	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/login_ip_banned	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,3 @@
+&lt;h1&gt;[%l('Login Not Allowed')%]&lt;/h1&gt;
+
+[%l('Logins are not permitted from [_1]', c.request.address)%]

Added: trunk/root/skin2/user/lostpassword/lost_password
===================================================================
--- trunk/root/skin2/user/lostpassword/lost_password	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/lostpassword/lost_password	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,77 @@
+&lt;h1&gt;Password Reset&lt;/h1&gt;
+
+&lt;div class=&quot;yui-gb top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot; style=&quot;text-align:justify;&quot;&gt;
+        [% name %] [%l('PASSWORD STORES')%]
+        &nbsp;
+        [%l('PASSWORD IMPOSSIBLE')%]
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+&lt;div class=&quot;yui-gb top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot; style=&quot;text-align:justify;&quot;&gt;
+        [%l('PASSWORD GAIN')%]
+        &nbsp;
+        [%l('PASSWORD PROCEED')%]
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+        [%- IF view.error.messages %]
+        &lt;p&gt;
+            &lt;ul&gt;
+                 [% FOREACH message IN view.error.messages %]
+                    &lt;li&gt;[% message %]&lt;/li&gt;
+                [% END %]
+            &lt;/ul&gt;
+        &lt;/p&gt;
+        [% END %]
+
+&lt;form method=&quot;post&quot; action=&quot;user/password/forgotten&quot; name=&quot;password_reset_form&quot;&gt;
+    &lt;fieldset&gt;
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                &lt;label for=&quot;pwd_reset_username&quot;&gt;[%l('Username')%]:&lt;/a&gt;&lt;/label&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input type=&quot;text&quot; id=&quot;pwd_reset_username&quot; name=&quot;username&quot; class=&quot;input_text&quot; tabindex=&quot;1&quot; size=&quot;40&quot; /&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                &lt;label for=&quot;pwd_reset_email&quot;&gt;[%l('Email Address')%]:&lt;/a&gt;&lt;/label&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input type=&quot;text&quot; id=&quot;pwd_reset_email&quot; name=&quot;email&quot; class=&quot;input_text&quot; tabindex=&quot;2&quot; size=&quot;40&quot; /&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;button name=&quot;pwd_reset_submit&quot; class=&quot;input_button&quot; tabindex=&quot;3&quot; /&gt;[%l('Reset My Password')%]&lt;/button&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+    &lt;/fieldset&gt;
+&lt;/form&gt;

Added: trunk/root/skin2/user/lostpassword/lost_password_details_sent
===================================================================
--- trunk/root/skin2/user/lostpassword/lost_password_details_sent	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/lostpassword/lost_password_details_sent	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,11 @@
+&lt;div class=&quot;yui-gb top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot; style=&quot;text-align:justify;&quot;&gt;
+        [%l('PASSWORD DETAILS SENT')%]
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+&lt;/div&gt;

Added: trunk/root/skin2/user/lostpassword/reset
===================================================================
--- trunk/root/skin2/user/lostpassword/reset	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/lostpassword/reset	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,94 @@
+&lt;form action=&quot;user/password/reset/[% reset_uid %]&quot; method=&quot;post&quot; name=&quot;password_reset_form&quot;&gt;
+
+&lt;div class=&quot;yui-gb top_padded&quot;&gt;
+    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot; style=&quot;text-align:justify;&quot;&gt;
+        [%l('PASSWORD RESET')%]
+    &lt;/div&gt;
+    &lt;div class=&quot;yui-u&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+        [%- IF view.error.messages %]
+        &lt;p&gt;
+            &lt;ul&gt;
+                [% FOREACH message IN view.error.messages %]
+                    &lt;li&gt;[% message %]&lt;/li&gt;
+                [% END %]
+            &lt;/ul&gt;
+        &lt;/p&gt;
+        [% END %]
+
+    &lt;fieldset&gt;
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                &lt;label&gt;[%l('Name')%]:&lt;/label&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input type=&quot;text&quot; value=&quot;[% reset_user.first_name %] [% reset_user.last_name %]&quot; tabindex=&quot;1&quot; readonly=&quot;readonly&quot; disabled=&quot;disabled&quot; size=&quot;40&quot; /&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                &lt;label for=&quot;reset_username&quot;&gt;[%l('Username')%]:&lt;/label&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input type=&quot;text&quot; name=&quot;reset_username&quot; id=&quot;reset_username&quot; size=&quot;40&quot; tabindex=&quot;2&quot; /&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                &lt;label for=&quot;new_password&quot;&gt;[%l('New Password')%]:&lt;/label&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input type=&quot;password&quot; name=&quot;new_password&quot; id=&quot;new_password&quot; size=&quot;40&quot; tabindex=&quot;3&quot; /&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                &lt;label for=&quot;confirm_password&quot;&gt;[%l('Confirm Password')%]:&lt;/label&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input type=&quot;password&quot; name=&quot;confirm_password&quot; id=&quot;confirm_password&quot; size=&quot;40&quot; tabindex=&quot;4&quot; /&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+
+        &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;button type=&quot;submit&quot; class=&quot;input_button&quot; tabindex=&quot;5&quot; name=&quot;reset_password&quot; /&gt;[%l('Reset My Password')%]&lt;/button&gt;
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                &nbsp;
+            &lt;/div&gt;
+        &lt;/div&gt;
+    &lt;/fieldset&gt;
+&lt;/form&gt;
+
+&lt;!-- put focus into the username field on the form above --&gt;
+&lt;script language=&quot;text/javascript&quot;&gt;
+    &lt;!-- Begin
+    document.forms['password_reset_form'].elements['reset_username'].focus();
+    // End --&gt;
+&lt;/script&gt;
+

Added: trunk/root/skin2/user/lostpassword/reset_success
===================================================================
--- trunk/root/skin2/user/lostpassword/reset_success	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/lostpassword/reset_success	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,2 @@
+&lt;!-- I don't think we see this page any more --&gt;
+[%l('PASSWORD RESET SUCCESS')%]

Added: trunk/root/skin2/user/posting_ip_banned
===================================================================
--- trunk/root/skin2/user/posting_ip_banned	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/posting_ip_banned	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,3 @@
+&lt;h1&gt;[%l('Posting Not Allowed')%]&lt;/h1&gt;
+
+[%l('Posting is not permitted from [_1]', c.request.address)%]

Added: trunk/root/skin2/user/profile
===================================================================
--- trunk/root/skin2/user/profile	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/profile	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,179 @@
+&lt;!-- user/profile --&gt;
+&lt;h1&gt;[%l('User Profile')%]&lt;/h1&gt;
+[% IF profiled_user %]
+    &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            [% INCLUDE shared/user_avatar person=profiled_user %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+
+            &lt;div class=&quot;yui-gf&quot;&gt;
+                &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                    [%l('Nickname')%]:
+                &lt;/div&gt;
+                &lt;div class=&quot;yui-u&quot;&gt;
+                    [% profiled_user.forum_name %]
+                &lt;/div&gt;
+            &lt;/div&gt;
+
+            [% IF profiled_user.suspended %]
+            &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+                &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                &nbsp;
+                &lt;/div&gt;
+                &lt;div class=&quot;yui-u&quot;&gt;
+                    [%l('Suspended')%]
+                &lt;/div&gt;
+            &lt;/div&gt;
+            [% END %]
+
+            &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+                &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                    [%l('Posts Made')%]:
+                &lt;/div&gt;
+                &lt;div class=&quot;yui-u&quot;&gt;
+                    [% profiled_user.post_count %]
+                &lt;/div&gt;
+            &lt;/div&gt;
+
+            &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+                &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                    [%l('Last Post')%]:
+                &lt;/div&gt;
+                &lt;div class=&quot;yui-u&quot;&gt;
+                    [% IF profiled_user.last_post %]
+                    &lt;a href=&quot;thread/view?thread=[% profiled_user.last_post.thread.id %]&quot;&gt;[% ForumCode.escape(profiled_user.last_post.thread.subject) |truncate(55) %]&lt;/a&gt;
+                    &lt;br /&gt;
+                    [% nicedate(profiled_user.last_post.created) %]
+                    [% ELSE %]
+                    [%l('Never Posted')%] 
+                    [% END %]
+                &lt;/div&gt;
+            &lt;/div&gt;
+
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    [% IF authed_user.is_site_moderator || authed_user.can_suspend_account %]
+        &lt;h2&gt;[%l('Administration')%]&lt;/h2&gt;
+
+        [% IF authed_user.can_suspend_account %]
+            &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+                &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                [%l('Suspend Account')%]
+                &lt;/div&gt;
+                &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input
+                    type=&quot;checkbox&quot;
+                    name=&quot;suspend_account&quot;
+                    id=&quot;suspend_account&quot;
+                    value=&quot;[%profiled_user.id%]&quot;
+                    [% IF profiled_user.suspended %]checked=&quot;true&quot;[% END %]
+                &gt;
+                &lt;/div&gt;
+            &lt;/div&gt;
+            [% IF profiled_user.suspended %]
+                &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+                    &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                        [%l('Reason for suspension')%]:
+                    &lt;/div&gt;
+                    &lt;div class=&quot;yui-u&quot;&gt;
+                        [% ForumCode.escape(profiled_user.last_suspension.message) ||l('No reason given') %]
+                    &lt;/div&gt;
+                &lt;/div&gt;
+            [% END %]
+        [% END %]
+    [% END %]
+
+    [% IF authed_user.can_ip_ban %]
+        [% SET ips = profiled_user.ips_posted_from %]
+        &lt;h2&gt;[%l('IP Addresses')%]&lt;/h2&gt;
+        &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+            &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                [% IF ips.size %]
+                    [%l('User has posted from')%]
+                [% ELSE %]
+                    [%l('User has never posted')%]
+                [% END %]
+            &lt;/div&gt;
+            &lt;div class=&quot;yui-u&quot;&gt;
+                [% IF ips.size %]
+                    [% FOR ip IN ips %]
+                    &lt;span id=&quot;ctx_[%ip%]&quot;&gt;
+                        &lt;a href=&quot;[%c.uri_for('/site/ip_info',{'address'=&gt;ip})%]&quot;&gt;[% ip %]&lt;/a&gt;
+                    &lt;/span&gt;[% UNLESS loop.last %], [% END %]
+                    &lt;script type=&quot;text/javascript&quot;&gt;
+                        YAHOO.namespace(&quot;example.container&quot;);
+                        [% SET people_posting = c.model('ParleyDB::Post').people_posting_from_ip(&quot;$ip&quot;) %]
+                        [% SET ttTxt = '' %]
+                        [% WHILE (post = people_posting.next) %]
+                        [% ttTxt = &quot;${ttTxt} &lt;li&gt;$post.creator.forum_name&lt;/li&gt;&quot; %]
+                        [% END %]
+                        YAHOO.example.container.tt1 = new YAHOO.widget.Tooltip(
+                            &quot;tt_[%ip%]&quot;,
+                            {
+                                context:&quot;ctx_[%ip%]&quot;,
+                                text:&quot;Users posting from [%ip%]: &lt;ul&gt;[%ttTxt%]&lt;/ul&gt;&quot;
+                            }
+                        );
+                    &lt;/script&gt;
+                    [% END %]
+                [% END %]
+            &lt;/div&gt;
+        &lt;/div&gt;
+    [% END %]
+
+    [% IF authed_user.is_site_moderator %]
+        &lt;h2&gt;[%l('Forum Moderation')%]&lt;/h2&gt;
+
+        [% SET dummy=available_forums.reset %]
+        [% WHILE (forum = available_forums.next) %]
+            &lt;div class=&quot;yui-gf top_padded forum_moderator_list&quot;&gt;
+                &lt;div class=&quot;yui-u first align_right&quot;&gt;
+                [%forum.name%]
+                &lt;/div&gt;
+                &lt;div class=&quot;yui-u&quot;&gt;
+                &lt;input
+                    type=&quot;checkbox&quot;
+                    class=&quot;fmod_checkbox&quot;
+                    name=&quot;moderate_forum&quot;
+                    id=&quot;moderateforum_[%forum.id%]&quot;
+                    [%IF profiled_user.can_moderate_forum(forum.id)%]checked=&quot;true&quot;[% END %]
+                &gt;
+                    &lt;span id=&quot;status_[%forum.id%]&quot;&gt;&lt;/span&gt;
+                &lt;/div&gt;
+            &lt;/div&gt;
+        [% END %]
+    [% END %]
+
+    [% IF authed_user.is_site_moderator %]
+        &lt;h2&gt;[%l('User Roles')%]&lt;/h2&gt;
+
+        &lt;a href=&quot;[%c.uri_for('/site/user',{pid=&gt;0})%]&quot;&gt;[%l('Manage user roles')%]&lt;/a&gt;
+    [% END %]
+[% ELSE %]
+    &lt;p&gt;[%l('PROFILE NOT FOUND')%]&lt;/p&gt;
+[% END %]
+&lt;!-- end : user/profile --&gt;
+
+
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/script/user_suspend.js')%]&quot;&gt;&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+    var person = {
+        id: [%profiled_user.id%]
+    };
+&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot; src=&quot;[%c.uri_for('/static/script/user_forum_moderate.js')%]&quot;&gt;&lt;/script&gt;
+
+&lt;div id=&quot;suspend_reason_dialog&quot; style=&quot;visibility:hidden;&quot;&gt;
+    &lt;div class=&quot;hd&quot;&gt;Please enter suspension information&lt;/div&gt;
+    &lt;div class=&quot;bd&quot;&gt;
+        &lt;form method=&quot;POST&quot; action=&quot;assets/post.php&quot;&gt;
+            &lt;label for=&quot;suspension_reason&quot;&gt;[%l('Reason for suspension')%]:&lt;/label&gt;
+            &lt;br /&gt;
+            &lt;textarea id=&quot;suspension_reason&quot; cols=&quot;30&quot; rows=&quot;6&quot;&gt;&lt;/textarea&gt;
+        &lt;/form&gt;
+    &lt;/div&gt;
+&lt;/div&gt;
+
+[% PROCESS shared/ajax_dialog %]

Added: trunk/root/skin2/user/signup/signup
===================================================================
--- trunk/root/skin2/user/signup/signup	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/signup/signup	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,154 @@
+&lt;h1&gt;User Signup&lt;/h1&gt;
+
+[% IF view.error.message %]
+    [% view.error.message %]
+    &lt;ul&gt;
+        [% FOREACH message IN view.error.messages %]
+            &lt;li&gt;[% message %]&lt;/li&gt;
+        [% END %]
+    &lt;/ul&gt;
+[% END %]
+
+&lt;form action=&quot;[%c.uri_for('user/signup')%]&quot; method=&quot;post&quot; name=&quot;signup_form&quot;&gt;
+    &lt;div&gt;
+        [%l('SIGNUP COMPLETE FORM')%] 
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;username&quot;&gt;[%l('SIGNUP USERNAME')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;text&quot; id=&quot;new_username&quot; name=&quot;new_username&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_new_username %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;password&quot;&gt;[%l('SIGNUP PASSWORD')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;password&quot; id=&quot;new_password&quot; name=&quot;new_password&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_new_password %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;confirm_password&quot;&gt;[%l('SIGNUP PASSWORD CONFIRM')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;password&quot; id=&quot;confirm_password&quot; name=&quot;confirm_password&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_confirm_password %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gd top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot; style=&quot;text-align:justify;&quot;&gt;
+            [%l('SIGNUP EMAIL USAGE')%] 
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;email&quot;&gt;[%l('SIGNUP EMAIL')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;text&quot; id=&quot;email&quot; name=&quot;email&quot; size=&quot;40&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_email %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;confirm_email&quot;&gt;[%l('SIGNUP EMAIL CONFIRM')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;text&quot; id=&quot;confirm_email&quot; name=&quot;confirm_email&quot; size=&quot;40&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_confirm_email %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div style=&quot;background-color:#ccc;margin-top:5px;margin-bottom:5px;&quot;&gt;
+        &nbsp;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;first_name&quot;&gt;[%l('First Name')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;text&quot; id=&quot;first_name&quot; name=&quot;first_name&quot; size=&quot;40&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_first_name %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;last_name&quot;&gt;[%l('Last Name')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;text&quot; id=&quot;last_name&quot; name=&quot;last_name&quot; size=&quot;40&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_last_name %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gd top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot; style=&quot;text-align:justify;&quot;&gt;
+            [%l('SIGNUP FORUMNAME DESCRIPTION')%] 
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &lt;label for=&quot;forum_name&quot;&gt;[%l('SIGNUP FORUMNAME')%]:&lt;/label&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &lt;input type=&quot;text&quot; id=&quot;forum_name&quot; name=&quot;forum_name&quot; size=&quot;40&quot; class=&quot;input_text&quot; /&gt;
+            [% form_error.field_error_forum_name %]
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gb top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot; style=&quot;text-align:center;&quot;&gt;
+            &lt;input type=&quot;submit&quot; name=&quot;form_submit&quot; value=&quot;[%l('Register')%]&quot; class=&quot;input_button&quot; /&gt;
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            &nbsp;
+        &lt;/div&gt;
+    &lt;/div&gt;
+&lt;/form&gt;

Added: trunk/root/skin2/user/signup_ip_banned
===================================================================
--- trunk/root/skin2/user/signup_ip_banned	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/signup_ip_banned	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,3 @@
+&lt;h1&gt;[%l('Registration Not Allowed')%]&lt;/h1&gt;
+
+[%l('Registrations are not permitted from [_1]', c.request.address)%]

Added: trunk/root/skin2/user/suspended
===================================================================
--- trunk/root/skin2/user/suspended	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin2/user/suspended	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1,21 @@
+&lt;h1 class=&quot;top_padded&quot;&gt;Your account has been suspended.&lt;/h1&gt;
+
+[% IF (profiled_user = authed_user) %]
+    &lt;div class=&quot;yui-gf&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            [%l('Nickname')%]:
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            [% profiled_user.forum_name %]
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &lt;div class=&quot;yui-gf top_padded&quot;&gt;
+        &lt;div class=&quot;yui-u first align_right&quot;&gt;
+            [%l('Reason for suspension')%]:
+        &lt;/div&gt;
+        &lt;div class=&quot;yui-u&quot;&gt;
+            [% ForumCode.escape(profiled_user.last_suspension.message) ||l('No reason given') %]
+        &lt;/div&gt;
+    &lt;/div&gt;
+[% END %]

Added: trunk/root/skin3/thread/view
===================================================================
--- trunk/root/skin3/thread/view	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/skin3/thread/view	2008-12-22 22:01:00 UTC (rev 991)
@@ -0,0 +1 @@
+&lt;h1&gt;Skin 3&lt;/h1&gt;

Modified: trunk/root/static/css/parley-skin1.css
===================================================================
--- trunk/root/static/css/parley-skin1.css	2008-12-22 22:00:47 UTC (rev 990)
+++ trunk/root/static/css/parley-skin1.css	2008-12-22 22:01:00 UTC (rev 991)
@@ -2,7 +2,7 @@
 
 body {
     background-color:   #f0983d;
-    font-family:        fixed;
+    font-family:        monospace;
     color:              red;
 }
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000872.html">[Parley-svn] r990 - / trunk
</A></li>
	<LI>Next message: <A HREF="000874.html">[Parley-svn] r992 - / trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#873">[ date ]</a>
              <a href="thread.html#873">[ thread ]</a>
              <a href="subject.html#873">[ subject ]</a>
              <a href="author.html#873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/parley-svn">More information about the Parley-svn
mailing list</a><br>
</body></html>
